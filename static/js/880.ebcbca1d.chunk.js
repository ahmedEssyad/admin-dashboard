"use strict";(self.webpackChunkadmin_dashboard=self.webpackChunkadmin_dashboard||[]).push([[880],{63338:(e,t,i)=>{i.d(t,{A:()=>s});const r=i(29246).A.create({baseURL:"https://restapi-3jza.onrender.com"});r.interceptors.request.use((e=>{e.data instanceof FormData||(e.headers["Content-Type"]="application/json");const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),r.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(localStorage.removeItem("token"),window.location.href="/admin/login"),Promise.reject(e))));new Map;const s=r},78876:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ht});var r=i(9950),s=i(28429),n=i(24436),o=i(65869),a=i(74489),l=i(16491),c=i(19808),d=i(53291),x=i(79539),h=i(59254),m=i(97497),u=i(22302),p=i(88060),j=i(14857),A=i(46589),g=i(83239),b=i(55660),v=i(25333),y=i(82053),f=i(10226),w=i(4447),C=i(39694),P=i(249),_=i(32610),k=i(14195),S=i(83563);const W=i.p+"static/media/logo.cf59bf8e0c543aee3c49.png";var R=i(98692),q=i(2507),I=i(71471),N=i(18274),z=i(73212),B=i(49715),D=i(67443),$=i(64085),F=i(91348),E=i(86835),L=i(42074),M=i(34033),T=i(61534),O=i(44414);const V=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:(0,m.X4)(t.palette.common.white,.15),"&:hover":{backgroundColor:(0,m.X4)(t.palette.common.white,.25)},marginRight:t.spacing(2),marginLeft:0,width:"100%",[t.breakpoints.up("sm")]:{marginLeft:t.spacing(3),width:"auto"},transition:"all 0.3s ease"}})),G=(0,h.Ay)("div")((e=>{let{theme:t}=e;return{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),H=(0,h.Ay)(u.Ay)((e=>{let{theme:t}=e;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:`calc(1em + ${t.spacing(4)})`,transition:t.transitions.create("width"),width:"100%",[t.breakpoints.up("md")]:{width:"20ch"}}}})),U=(0,x.P)(p.A),Y=()=>{const[e,t]=(0,r.useState)(!1),[i,n]=(0,r.useState)(""),[o,a]=(0,r.useState)(!1),d=(0,j.A)(),h=(0,A.A)(d.breakpoints.down("md")),u=(0,s.Zp)(),{getCartCount:p}=(0,M._)(),{getWishlistCount:Y}=(0,T.n)();(0,r.useEffect)((()=>{const e=()=>{a(window.scrollY>50)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]);const Z=()=>{t(!e)},X=[{text:"Accueil",icon:(0,O.jsx)(R.A,{}),path:"/"},{text:"Produits",icon:(0,O.jsx)(q.A,{}),path:"/products"},{text:"Cat\xe9gories",icon:(0,O.jsx)(I.A,{}),path:"/categories"},{text:"Marques",icon:(0,O.jsx)(N.A,{}),path:"/companies"}];return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(U,{position:"fixed",initial:!1,animate:{backgroundColor:o?d.palette.primary.main:"48cae4",boxShadow:o?d.shadows[4]:"none"},sx:{backdropFilter:o?"none":"blur(10px)",transition:"all 0.3s ease-in-out"},children:(0,O.jsx)(c.A,{maxWidth:"lg",children:(0,O.jsxs)(g.A,{disableGutters:!0,children:[h&&(0,O.jsx)(b.A,{title:"Menu",children:(0,O.jsx)(v.A,{size:"large",edge:"start",color:"inherit","aria-label":"menu",onClick:Z,sx:{mr:2,transition:"transform 0.2s","&:hover":{transform:"rotate(90deg)"}},children:(0,O.jsx)(z.A,{})})}),(0,O.jsx)(y.A,{variant:"h5",component:L.N_,to:"/",sx:{flexGrow:1,textDecoration:"none",color:"white",fontWeight:"bold",display:"flex",alignItems:"center",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)"}},children:(0,O.jsxs)(g.A,{children:[(0,O.jsx)("img",{src:W,alt:"Mauristock Logo",height:"40",style:{marginRight:"10px"}}),(0,O.jsx)(y.A,{variant:"h6",children:"Mauristock"})]})}),!h&&(0,O.jsx)(l.A,{sx:{display:"flex",alignItems:"center"},children:X.map((e=>(0,O.jsxs)(f.A,{component:L.N_,to:e.path,color:"inherit",sx:{mx:1,transition:"all 0.3s ease","&:hover":{backgroundColor:(0,m.X4)(d.palette.common.white,.15)}},children:[e.icon,(0,O.jsx)(l.A,{sx:{ml:1},children:e.text})]},e.text)))}),(0,O.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,O.jsxs)(V,{children:[(0,O.jsx)(G,{children:(0,O.jsx)(B.A,{})}),(0,O.jsx)(H,{placeholder:"Rechercher...",inputProps:{"aria-label":"rechercher"},value:i,onChange:e=>n(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(u(`/search?q=${i}`),n(""))}})]}),(0,O.jsx)(b.A,{title:"Liste de souhaits",children:(0,O.jsx)(v.A,{color:"inherit",component:L.N_,to:"/wishlist",sx:{ml:1,transition:"transform 0.2s","&:hover":{transform:"scale(1.1)",color:"primary.light"}},children:(0,O.jsx)(w.A,{badgeContent:Y(),color:"error",children:(0,O.jsx)(D.A,{})})})}),(0,O.jsx)(b.A,{title:"Panier",children:(0,O.jsx)(v.A,{color:"inherit",component:L.N_,to:"/cart",sx:{ml:1,transition:"transform 0.2s","&:hover":{transform:"scale(1.1)",color:"primary.light"}},children:(0,O.jsx)(w.A,{badgeContent:p(),color:"error",children:(0,O.jsx)($.A,{})})})}),(0,O.jsx)(b.A,{title:"Mon Profil",children:(0,O.jsx)(v.A,{color:"inherit",component:L.N_,to:"/profile",sx:{ml:1,transition:"transform 0.2s","&:hover":{transform:"scale(1.1)",color:"primary.light"}},children:(0,O.jsx)(F.A,{})})})]})]})})}),(0,O.jsx)(C.Ay,{anchor:"left",open:e,onClose:Z,sx:{"& .MuiDrawer-paper":{backgroundColor:d.palette.background.default,width:250}},children:(0,O.jsxs)(l.A,{role:"presentation",children:[(0,O.jsx)(l.A,{sx:{display:"flex",justifyContent:"flex-end",p:1},children:(0,O.jsx)(b.A,{title:"Fermer",children:(0,O.jsx)(v.A,{onClick:Z,children:(0,O.jsx)(E.A,{})})})}),(0,O.jsxs)(P.A,{children:[X.map((e=>(0,O.jsx)(x.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,O.jsxs)(_.Ay,{button:!0,component:L.N_,to:e.path,onClick:Z,sx:{transition:"background-color 0.3s ease","&:hover":{backgroundColor:(0,m.X4)(d.palette.primary.main,.1)}},children:[(0,O.jsx)(k.A,{children:e.icon}),(0,O.jsx)(S.A,{primary:e.text})]})},e.text))),(0,O.jsx)(x.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,O.jsxs)(_.Ay,{button:!0,component:L.N_,to:"/wishlist",onClick:Z,children:[(0,O.jsx)(k.A,{children:(0,O.jsx)(w.A,{badgeContent:Y(),color:"error",children:(0,O.jsx)(D.A,{})})}),(0,O.jsx)(S.A,{primary:"Liste de souhaits"})]})}),(0,O.jsx)(x.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,O.jsxs)(_.Ay,{button:!0,component:L.N_,to:"/cart",onClick:Z,children:[(0,O.jsx)(k.A,{children:(0,O.jsx)(w.A,{badgeContent:p(),color:"error",children:(0,O.jsx)($.A,{})})}),(0,O.jsx)(S.A,{primary:"Panier"})]})})]})]})})]})};var Z=i(60899),X=i(36080),K=i(5379),Q=i(9404),J=i(41675),ee=i(12015);const te=()=>{const e=[{icon:(0,O.jsx)(K.A,{}),link:"https://facebook.com",color:"#1877F2"},{icon:(0,O.jsx)(Q.A,{}),link:"https://twitter.com",color:"#1DA1F2"},{icon:(0,O.jsx)(J.A,{}),link:"https://instagram.com",color:"#E1306C"}];return(0,O.jsx)(l.A,{component:"footer",sx:{py:6,px:2,mt:"auto",backgroundColor:e=>e.palette.grey[100],position:"relative",overflow:"hidden"},children:(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsxs)(Z.Ay,{container:!0,spacing:4,sx:{position:"relative",zIndex:2},children:[(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:4,children:(0,O.jsxs)(x.P.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.5},children:[(0,O.jsx)(y.A,{variant:"h5",color:"text.primary",gutterBottom:!0,sx:{fontWeight:"bold",mb:2,borderBottom:"2px solid",borderColor:"primary.main",pb:1,width:"fit-content"},children:"\xc0 propos"}),(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",children:"Votre plateforme e-commerce de confiance pour tous vos besoins. Nous nous engageons \xe0 vous offrir la meilleure exp\xe9rience d'achat."})]})}),(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:4,children:(0,O.jsxs)(x.P.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,O.jsx)(y.A,{variant:"h5",color:"text.primary",gutterBottom:!0,sx:{fontWeight:"bold",mb:2,borderBottom:"2px solid",borderColor:"primary.main",pb:1,width:"fit-content"},children:"Liens rapides"}),(0,O.jsx)(l.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[{label:"Cat\xe9gories",path:"/categories"},{label:"Entreprises",path:"/companies"},{label:"Recherche",path:"/search"},{label:"Mon Compte",path:"/profile"}].map((e=>(0,O.jsx)(X.A,{component:L.N_,to:e.path,color:"inherit",sx:{textDecoration:"none",transition:"color 0.3s ease","&:hover":{color:"primary.main",transform:"translateX(5px)"}},children:e.label},e.path)))})]})}),(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:4,children:(0,O.jsxs)(x.P.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:[(0,O.jsx)(y.A,{variant:"h5",color:"text.primary",gutterBottom:!0,sx:{fontWeight:"bold",mb:2,borderBottom:"2px solid",borderColor:"primary.main",pb:1,width:"fit-content"},children:"Contact"}),(0,O.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,O.jsx)(ee.A,{sx:{mr:2,color:"text.secondary"}}),(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",children:"contact@example.com"})]}),(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",children:"T\xe9l\xe9phone: +123 456 789"})]})})]}),(0,O.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",mt:4,gap:2},children:e.map(((e,t)=>(0,O.jsx)(b.A,{title:`Suivez-nous sur ${e.link.split("//")[1]}`,children:(0,O.jsx)(v.A,{component:"a",href:e.link,target:"_blank",rel:"noopener noreferrer",sx:{color:e.color,transition:"transform 0.3s ease","&:hover":{transform:"scale(1.2)",backgroundColor:`${e.color}15`}},children:e.icon})},e.link)))}),(0,O.jsx)(l.A,{mt:4,children:(0,O.jsxs)(y.A,{variant:"body2",color:"text.secondary",align:"center",sx:{borderTop:"1px solid",borderColor:"divider",pt:2},children:["\xa9 ",(new Date).getFullYear()," Mon E-commerce. Tous droits r\xe9serv\xe9s."]})})]})})},ie=(0,n.A)({palette:{mode:"light",primary:{main:"#1976d2",light:"#42a5f5",dark:"#1565c0"},background:{default:"#f4f6f8",paper:"#ffffff"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(",")},components:{MuiCssBaseline:{styleOverrides:"\n        body {\n          scroll-behavior: smooth;\n        }\n        ::-webkit-scrollbar {\n          width: 8px;\n        }\n        ::-webkit-scrollbar-track {\n          background: #f1f1f1;\n        }\n        ::-webkit-scrollbar-thumb {\n          background: #888;\n          border-radius: 4px;\n        }\n        ::-webkit-scrollbar-thumb:hover {\n          background: #555;\n        }\n      "}}}),re={initial:{opacity:0,scale:.99},in:{opacity:1,scale:1,transition:{duration:.5,ease:"easeInOut"}},out:{opacity:0,scale:1.01,transition:{duration:.5,ease:"easeInOut"}}},se=e=>{let{children:t}=e;return(0,O.jsxs)(o.A,{theme:ie,children:[(0,O.jsx)(a.Ay,{}),(0,O.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh",backgroundColor:ie.palette.background.default},children:[(0,O.jsx)(Y,{}),(0,O.jsx)(d.N,{mode:"wait",children:(0,O.jsx)(x.P.main,{initial:"initial",animate:"in",exit:"out",variants:re,style:{flexGrow:1,display:"flex",flexDirection:"column"},children:(0,O.jsx)(l.A,{component:"section",sx:{flexGrow:1,py:{xs:2,sm:4},mt:{xs:6,sm:8}},children:(0,O.jsx)(c.A,{maxWidth:"lg",sx:{"@media (max-width:600px)":{px:{xs:1,sm:2}}},children:t})})},window.location.pathname)}),(0,O.jsx)(te,{})]})]})};var ne=i(82917),oe=i(74745),ae=i(48089),le=i(38039),ce=i(50704),de=i(13569),xe=i(77923),he=(i(48433),i(63338));const me=(e,t,i)=>e?e.includes("cloudinary.com")?e.replace("/upload/",`/upload/w_${t},h_${i},c_fill,q_auto,f_auto/`):e.startsWith("/uploads/")?`${e}?w=${t}&h=${i}`:e:`https://via.placeholder.com/${t}x${i}?text=Image`,ue=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];clearTimeout(t),t=setTimeout((()=>e(...s)),i)}},pe=()=>{var e;const t=(0,j.A)(),i=(0,A.A)(t.breakpoints.down("sm")),{addToCart:s}=(0,M._)(),{addToWishlist:n}=(0,T.n)(),o=(0,r.useRef)(null),[a,d]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),[g,b]=(0,r.useState)(!0),[w,C]=(0,r.useState)(null),P=(0,r.useCallback)(ue(((e,t)=>{e.preventDefault(),e.stopPropagation(),s(t)}),100),[s]),_=(0,r.useCallback)(ue(((e,t)=>{e.preventDefault(),e.stopPropagation(),n(t)}),100),[n]),k=(0,r.useCallback)((async()=>{try{b(!0);const[e,t,i]=await Promise.all([he.A.get("/categories"),he.A.get("/products/promotions"),he.A.get("/products")]),r=e.data.slice(0,4);d(r);const s=t.data.slice(0,4);p(s),s.length>0&&s[0].mainPicture&&(e=>{if(!e)return;const t=document.createElement("link");t.rel="preload",t.as="image",t.href=e,document.head.appendChild(t)})(s[0].mainPicture);const n=i.data.filter((e=>!t.data.some((t=>t._id===e._id)))).sort((()=>.5-Math.random()));m(n.slice(0,4)),b(!1)}catch(w){console.error("Erreur lors du chargement des donn\xe9es:",w),C(w),b(!1)}}),[]);(0,r.useEffect)((()=>{if(k(),"PerformanceObserver"in window)try{const e=new PerformanceObserver((e=>{const t=e.getEntries(),i=t[t.length-1];console.log("LCP:",i.startTime/1e3,"seconds")}));return e.observe({type:"largest-contentful-paint",buffered:!0}),()=>{e.disconnect()}}catch(e){console.error("Performance monitoring not supported",e)}}),[k]);const S={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},W={hidden:{transform:"translateY(20px)",opacity:0},visible:{transform:"translateY(0)",opacity:1,transition:{duration:.3}}};return w?(0,O.jsx)(c.A,{children:(0,O.jsxs)(l.A,{sx:{textAlign:"center",py:10},children:[(0,O.jsx)(y.A,{variant:"h4",color:"error",children:"Erreur de chargement"}),(0,O.jsx)(y.A,{children:"Impossible de charger les donn\xe9es. Veuillez r\xe9essayer ult\xe9rieurement."}),(0,O.jsx)(f.A,{variant:"contained",color:"primary",onClick:k,sx:{mt:2},children:"R\xe9essayer"})]})}):g?(0,O.jsx)(c.A,{children:(0,O.jsxs)(l.A,{sx:{mb:6},children:[(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:i?200:400,sx:{borderRadius:2,mb:2}}),(0,O.jsx)(Z.Ay,{container:!0,spacing:3,sx:{mt:3},children:[1,2,3,4].map((e=>(0,O.jsxs)(Z.Ay,{item:!0,xs:12,sm:6,md:3,children:[(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:200,sx:{borderRadius:2,mb:1}}),(0,O.jsx)(ne.A,{variant:"text",width:"80%"}),(0,O.jsx)(ne.A,{variant:"text",width:"40%"})]},e)))})]})}):(0,O.jsxs)(l.A,{children:[(0,O.jsxs)(l.A,{ref:o,sx:{height:{xs:"50vh",md:"60vh"},position:"relative",mb:6,borderRadius:2,overflow:"hidden",boxShadow:3,bgcolor:"grey.100"},children:[(0,O.jsx)(l.A,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",bgcolor:"grey.600"}}),(0,O.jsx)(l.A,{component:"img",src:me(null===(e=u[0])||void 0===e?void 0:e.mainPicture,1600,900)||"https://via.placeholder.com/1200x600",alt:"Hero banner",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",filter:"brightness(0.6)"},fetchpriority:"high",decoding:"async",loading:"eager",width:"1600",height:"900"}),(0,O.jsx)(c.A,{sx:{height:"100%",position:"relative",zIndex:1},children:(0,O.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",color:"white",textAlign:{xs:"center",md:"left"}},children:[(0,O.jsx)(y.A,{variant:i?"h4":"h2",component:"h1",gutterBottom:!0,sx:{maxWidth:{md:"70%"}},children:"D\xe9couvrez notre catalogue de produits"}),(0,O.jsx)(y.A,{variant:i?"body1":"h5",gutterBottom:!0,sx:{mb:4,maxWidth:{md:"60%"},mx:{xs:"auto",md:"unset"}},children:"Une s\xe9lection de qualit\xe9 pour tous vos besoins"}),(0,O.jsx)(l.A,{sx:{display:"flex",justifyContent:{xs:"center",md:"flex-start"}},children:(0,O.jsx)(f.A,{component:L.N_,to:"/categories",variant:"contained",color:"primary",size:"large",children:"Explorer les cat\xe9gories"})})]})})]}),(0,O.jsxs)(c.A,{children:[(0,O.jsxs)(l.A,{sx:{mb:6},children:[(0,O.jsx)(y.A,{variant:"h4",component:"h2",gutterBottom:!0,align:"center",children:"Nos Cat\xe9gories"}),(0,O.jsx)(oe.A,{sx:{mb:4,mx:"auto",width:"100px"}}),(0,O.jsx)(x.P.div,{variants:S,initial:"hidden",animate:"visible",children:(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:a.map((e=>(0,O.jsx)(Z.Ay,{item:!0,xs:6,md:3,children:(0,O.jsx)(x.P.div,{variants:W,children:(0,O.jsx)(ae.A,{sx:{height:"100%",transition:"transform 0.3s","&:hover":{transform:"scale(1.05)",boxShadow:3}},children:(0,O.jsxs)(le.A,{component:L.N_,to:`/categories/${e._id}`,sx:{height:"100%"},children:[(0,O.jsx)(l.A,{sx:{height:140,overflow:"hidden"},children:(0,O.jsx)(xe.LazyLoadImage,{src:me(e.logo,300,140)||"https://via.placeholder.com/300x140?text=Cat\xe9gorie",alt:e.name,effect:"blur",style:{width:"100%",height:"100%",objectFit:"cover"}})}),(0,O.jsx)(ce.A,{children:(0,O.jsx)(y.A,{variant:"h6",component:"div",noWrap:!0,children:e.name})})]})})})},e._id)))})}),(0,O.jsx)(l.A,{sx:{mt:3,textAlign:"center"},children:(0,O.jsx)(f.A,{component:L.N_,to:"/categories",variant:"outlined",color:"primary",children:"Voir toutes les cat\xe9gories"})})]}),u.length>0&&(0,O.jsxs)(l.A,{sx:{mb:6},children:[(0,O.jsx)(y.A,{variant:"h4",component:"h2",gutterBottom:!0,align:"center",sx:{mt:8},children:"Promotions Sp\xe9ciales"}),(0,O.jsx)(oe.A,{sx:{mb:4,mx:"auto",width:"100px"}}),(0,O.jsx)(x.P.div,{variants:S,initial:"hidden",animate:"visible",children:(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:u.map((e=>(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,O.jsx)(x.P.div,{variants:W,style:{height:"100%"},children:(0,O.jsx)(ae.A,{sx:{height:"100%",position:"relative",transition:"transform 0.3s","&:hover":{transform:"scale(1.05)",boxShadow:3}},children:(0,O.jsxs)(le.A,{component:L.N_,to:`/products/${e._id}`,sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,O.jsxs)(l.A,{sx:{position:"relative",width:"100%"},children:[(0,O.jsx)(l.A,{sx:{position:"relative",width:"100%",height:180},children:(0,O.jsx)(de.A,{component:"img",height:"180",width:"300",image:me(e.mainPicture,300,180)||"https://via.placeholder.com/300x180?text=Produit",alt:e.nom,loading:"lazy",sx:{position:"absolute",width:"100%",height:"100%",objectFit:"cover"}})}),(0,O.jsxs)(l.A,{sx:{position:"absolute",top:10,right:10,backgroundColor:"error.main",color:"white",padding:"4px 8px",borderRadius:1,fontWeight:"bold"},children:["-",Math.round(100*(1-e.discountedPrice/e.oldPrice)),"%"]})]}),(0,O.jsxs)(ce.A,{sx:{flexGrow:1},children:[(0,O.jsx)(y.A,{variant:"h6",component:"div",noWrap:!0,children:e.nom}),(0,O.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,O.jsxs)(y.A,{variant:"body1",color:"text.secondary",sx:{textDecoration:"line-through",mr:1},children:[e.oldPrice," \u20ac"]}),(0,O.jsxs)(y.A,{variant:"h6",color:"error.main",children:[e.discountedPrice," \u20ac"]})]})]}),(0,O.jsxs)(l.A,{sx:{position:"absolute",top:10,left:10,display:"flex",gap:1},children:[(0,O.jsx)(v.A,{size:"small",onClick:t=>P(t,e),sx:{bgcolor:"white","&:hover":{bgcolor:"primary.light"}},children:(0,O.jsx)($.A,{})}),(0,O.jsx)(v.A,{size:"small",onClick:t=>_(t,e),sx:{bgcolor:"white","&:hover":{bgcolor:"primary.light"}},children:(0,O.jsx)(D.A,{})})]})]})})})},e._id)))})}),(0,O.jsx)(l.A,{sx:{mt:3,textAlign:"center"},children:(0,O.jsx)(f.A,{component:L.N_,to:"/search?discount=true",variant:"outlined",color:"error",children:"Voir toutes les promotions"})})]}),(0,O.jsxs)(l.A,{sx:{mb:6},children:[(0,O.jsx)(y.A,{variant:"h4",component:"h2",gutterBottom:!0,align:"center",sx:{mt:8},children:"Produits Populaires"}),(0,O.jsx)(oe.A,{sx:{mb:4,mx:"auto",width:"100px"}}),(0,O.jsx)(x.P.div,{variants:S,initial:"hidden",animate:"visible",children:(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:h.map((e=>{var t;return(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,O.jsx)(x.P.div,{variants:W,style:{height:"100%"},children:(0,O.jsx)(ae.A,{sx:{height:"100%",position:"relative",transition:"transform 0.3s","&:hover":{transform:"scale(1.05)",boxShadow:3}},children:(0,O.jsxs)(le.A,{component:L.N_,to:`/products/${e._id}`,sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,O.jsx)(l.A,{sx:{position:"relative",width:"100%",height:180},children:(0,O.jsx)(de.A,{component:"img",height:"180",width:"300",image:me(e.mainPicture,300,180)||"https://via.placeholder.com/300x180?text=Produit",alt:e.nom,loading:"lazy",sx:{position:"absolute",width:"100%",height:"100%",objectFit:"cover"}})}),(0,O.jsxs)(ce.A,{sx:{flexGrow:1},children:[(0,O.jsx)(y.A,{variant:"h6",component:"div",noWrap:!0,children:e.nom}),(0,O.jsx)(y.A,{variant:"body1",color:"text.secondary",noWrap:!0,children:(null===(t=e.Company_id)||void 0===t?void 0:t.nom)||"Marque"}),(0,O.jsxs)(y.A,{variant:"h6",sx:{mt:1},children:[e.oldPrice," \u20ac"]})]}),(0,O.jsxs)(l.A,{sx:{position:"absolute",top:10,left:10,display:"flex",gap:1},children:[(0,O.jsx)(v.A,{size:"small",onClick:t=>P(t,e),sx:{bgcolor:"white","&:hover":{bgcolor:"primary.light"}},children:(0,O.jsx)($.A,{})}),(0,O.jsx)(v.A,{size:"small",onClick:t=>_(t,e),sx:{bgcolor:"white","&:hover":{bgcolor:"primary.light"}},children:(0,O.jsx)(D.A,{})})]})]})})})},e._id)}))})}),(0,O.jsx)(l.A,{sx:{mt:3,textAlign:"center"},children:(0,O.jsx)(f.A,{component:L.N_,to:"/products",variant:"outlined",color:"primary",children:"Voir tous les produits"})})]})]})]})};var je=i(52432),Ae=i(25277),ge=i(72236),be=i(84142),ve=i(71496);const ye=()=>{var e;const{id:t}=(0,s.g)(),i=(0,s.Zp)(),[n,o]=(0,r.useState)(null),[a,d]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),[j,A]=(0,r.useState)(!0),[g,b]=(0,r.useState)(0),[v,w]=(0,r.useState)(null);(0,r.useEffect)((()=>{(async()=>{try{A(!0);const e=await ve.A.get(`/categories/${t}`);o(e.data),e.data.subcategories_id&&d(e.data.subcategories_id),e.data.companies_id&&p(e.data.companies_id);const i=await ve.A.get(`/products/category/${t}`);m(i.data),A(!1)}catch(e){console.error("Erreur lors du chargement des donn\xe9es de la cat\xe9gorie:",e),i("/404"),A(!1)}})()}),[t,i]);const C=v?h.filter((e=>e.subcategories_id.some((e=>("object"===typeof e?e._id:e)===v)))):h,P={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},_={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};return j?(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsxs)(l.A,{sx:{mb:4},children:[(0,O.jsx)(ne.A,{variant:"text",width:"30%",height:40}),(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:200,sx:{borderRadius:2,mb:3,mt:2}}),(0,O.jsx)(ne.A,{variant:"text",width:"50%",height:30}),(0,O.jsx)(ne.A,{variant:"text",width:"80%",height:20})]}),(0,O.jsx)(l.A,{sx:{mb:4},children:(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:50})}),(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:[1,2,3,4,5,6].map((e=>(0,O.jsxs)(Z.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:200,sx:{borderRadius:2,mb:1}}),(0,O.jsx)(ne.A,{variant:"text",width:"80%"}),(0,O.jsx)(ne.A,{variant:"text",width:"40%"})]},e)))})]}):n?(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsxs)(l.A,{sx:{mb:4},children:[(0,O.jsxs)(je.A,{"aria-label":"breadcrumb",children:[(0,O.jsx)(X.A,{component:L.N_,underline:"hover",color:"inherit",to:"/",children:"Accueil"}),(0,O.jsx)(X.A,{component:L.N_,underline:"hover",color:"inherit",to:"/categories",children:"Cat\xe9gories"}),(0,O.jsx)(y.A,{color:"text.primary",children:n.name})]}),(0,O.jsxs)(l.A,{sx:{mt:2,mb:4,borderRadius:2,overflow:"hidden",height:200,position:"relative",boxShadow:3},children:[(0,O.jsx)(l.A,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundImage:`url(${n.logo||"https://via.placeholder.com/1200x200?text=Cat\xe9gorie"})`,backgroundSize:"cover",backgroundPosition:"center","&::before":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.4)"}}}),(0,O.jsxs)(l.A,{sx:{position:"absolute",bottom:0,left:0,width:"100%",p:3,color:"white",zIndex:1},children:[(0,O.jsx)(y.A,{variant:"h3",component:"h1",children:n.name}),(0,O.jsx)(y.A,{variant:"subtitle1",sx:{mt:1},children:n.description||`D\xe9couvrez notre gamme de produits ${n.name}`})]})]}),a.length>0&&(0,O.jsxs)(l.A,{sx:{mb:4},children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Sous-cat\xe9gories"}),(0,O.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:a.map((e=>(0,O.jsx)(Ae.A,{label:e.name,clickable:!0,color:v===e._id?"primary":"default",onClick:()=>{return t=e._id,void w(v===t?null:t);var t}},e._id)))})]}),(0,O.jsxs)(ge.A,{value:g,onChange:(e,t)=>{b(t),w(null)},sx:{mb:3},children:[(0,O.jsx)(be.A,{label:"Tous les produits"}),(0,O.jsx)(be.A,{label:"Marques"})]})]}),0===g?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(y.A,{variant:"h5",gutterBottom:!0,children:v?`Produits de la sous-cat\xe9gorie ${(null===(e=a.find((e=>e._id===v)))||void 0===e?void 0:e.name)||""}`:`Produits de la cat\xe9gorie ${n.name}`}),C.length>0?(0,O.jsx)(x.P.div,{variants:P,initial:"hidden",animate:"visible",children:(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:C.map((e=>{var t;return(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,O.jsx)(x.P.div,{variants:_,children:(0,O.jsx)(ae.A,{sx:{height:"100%"},children:(0,O.jsxs)(le.A,{component:L.N_,to:`/products/${e._id}`,sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,O.jsxs)(l.A,{sx:{position:"relative"},children:[(0,O.jsx)(de.A,{component:"img",height:"180",image:e.mainPicture||"https://via.placeholder.com/300x180?text=Produit",alt:e.nom}),e.discountedPrice&&(0,O.jsxs)(l.A,{sx:{position:"absolute",top:10,right:10,backgroundColor:"error.main",color:"white",padding:"4px 8px",borderRadius:1,fontWeight:"bold"},children:["-",Math.round(100*(1-e.discountedPrice/e.oldPrice)),"%"]})]}),(0,O.jsxs)(ce.A,{sx:{flexGrow:1},children:[(0,O.jsx)(y.A,{variant:"h6",component:"div",noWrap:!0,children:e.nom}),(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:(null===(t=e.Company_id)||void 0===t?void 0:t.nom)||"Marque non sp\xe9cifi\xe9e"}),e.discountedPrice?(0,O.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,O.jsxs)(y.A,{variant:"body1",color:"text.secondary",sx:{textDecoration:"line-through",mr:1},children:[e.oldPrice," \u20ac"]}),(0,O.jsxs)(y.A,{variant:"h6",color:"error.main",children:[e.discountedPrice," \u20ac"]})]}):(0,O.jsxs)(y.A,{variant:"h6",sx:{mt:1},children:[e.oldPrice," \u20ac"]})]})]})})})},e._id)}))})}):(0,O.jsx)(l.A,{sx:{py:4,textAlign:"center"},children:(0,O.jsx)(y.A,{variant:"h6",color:"text.secondary",children:"Aucun produit trouv\xe9 dans cette cat\xe9gorie"})})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(y.A,{variant:"h5",gutterBottom:!0,children:["Marques de la cat\xe9gorie ",n.name]}),u.length>0?(0,O.jsx)(x.P.div,{variants:P,initial:"hidden",animate:"visible",children:(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:u.map((e=>(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,O.jsx)(x.P.div,{variants:_,children:(0,O.jsx)(ae.A,{children:(0,O.jsxs)(le.A,{component:L.N_,to:`/companies/${e._id}`,children:[(0,O.jsx)(de.A,{component:"img",height:"140",image:e.logo||"https://via.placeholder.com/300x140?text=Marque",alt:e.nom,sx:{objectFit:"contain",p:2,bgcolor:"grey.100"}}),(0,O.jsx)(ce.A,{children:(0,O.jsx)(y.A,{variant:"h6",component:"div",children:e.nom})})]})})})},e._id)))})}):(0,O.jsx)(l.A,{sx:{py:4,textAlign:"center"},children:(0,O.jsx)(y.A,{variant:"h6",color:"text.secondary",children:"Aucune marque trouv\xe9e pour cette cat\xe9gorie"})})]})]}):(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsx)(y.A,{variant:"h5",color:"error",sx:{mt:4},children:"Cat\xe9gorie non trouv\xe9e"}),(0,O.jsx)(f.A,{component:L.N_,to:"/categories",variant:"contained",sx:{mt:2},children:"Retour aux cat\xe9gories"})]})};var fe=i(2235),we=i(98785),Ce=i(33174),Pe=i(81131),_e=(i(22399),i(74847),i(25713)),ke=i(85923),Se=i(15965),We=i(89299);const Re=e=>{var t;let{product:i,index:r}=e;const{addToCart:s}=(0,M._)(),{addToWishlist:n,removeFromWishlist:o,isInWishlist:a}=(0,T.n)();if(!i||!i._id)return console.error("Product data is invalid:",i),null;const c=a(i._id),d=i.discountedPrice?Math.round(100*(1-i.discountedPrice/i.oldPrice)):0,h={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,delay:r?.1*r:0}}};return(0,O.jsx)(x.P.div,{variants:h,children:(0,O.jsxs)(ae.A,{sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",transition:"all 0.3s ease",borderRadius:3,"&:hover":{transform:"translateY(-8px)",boxShadow:6}},elevation:2,children:[(0,O.jsxs)(l.A,{sx:{position:"relative",overflow:"hidden"},children:[(0,O.jsx)(le.A,{component:L.N_,to:`/products/${i._id}`,sx:{position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,width:"100%",height:"100%",transition:"background-color 0.3s ease",backgroundColor:"transparent"},"&:hover::before":{backgroundColor:"rgba(0,0,0,0.05)"}},children:i.mainPicture?(0,O.jsx)(xe.LazyLoadImage,{src:i.mainPicture,alt:i.nom,effect:"blur",style:{height:250,width:"100%",objectFit:"cover",display:"block",transition:"transform 0.3s ease"},wrapperProps:{style:{width:"100%",height:250,overflow:"hidden"}}}):(0,O.jsx)(de.A,{component:"img",height:"250",image:"https://via.placeholder.com/300x250?text=Produit",alt:i.nom})}),(0,O.jsxs)(l.A,{sx:{position:"absolute",top:10,width:"100%",px:1,display:"flex",justifyContent:"space-between"},children:[(0,O.jsxs)(l.A,{children:[i.discountedPrice&&(0,O.jsx)(Ae.A,{label:`-${d}%`,color:"error",size:"small",sx:{fontWeight:"bold",mr:1}}),void 0!==i.quantite&&i.quantite>0&&i.quantite<=5&&(0,O.jsx)(Ae.A,{label:`Stock: ${i.quantite}`,color:"warning",size:"small",sx:{fontSize:"0.7rem"}})]}),(0,O.jsx)(b.A,{title:c?"Retirer des favoris":"Ajouter aux favoris",children:(0,O.jsx)(v.A,{onClick:e=>{try{e.preventDefault(),c?(o(i._id),ke.oR.success("Produit retir\xe9 de la liste de souhaits")):(n(i),ke.oR.success("Produit ajout\xe9 \xe0 la liste de souhaits"))}catch(t){console.error("Erreur lors de la gestion de la wishlist:",t),ke.oR.error("Une erreur est survenue")}},sx:{bgcolor:"background.paper",boxShadow:2,"&:hover":{bgcolor:"background.default",transform:"scale(1.1)"},transition:"all 0.3s ease"},children:c?(0,O.jsx)(D.A,{color:"error"}):(0,O.jsx)(Se.A,{})})})]})]}),(0,O.jsxs)(ce.A,{sx:{flexGrow:1,pb:0},children:[(0,O.jsx)(y.A,{variant:"h6",component:"div",noWrap:!0,title:i.nom,sx:{mb:1},children:i.nom}),(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:(null===(t=i.Company_id)||void 0===t?void 0:t.nom)||"Marque non sp\xe9cifi\xe9e"}),i.description&&(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",mb:1},children:i.description}),(0,O.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mt:1},children:[i.discountedPrice?(0,O.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,O.jsxs)(y.A,{variant:"body1",color:"text.secondary",sx:{textDecoration:"line-through",mr:1,opacity:.7},children:[i.oldPrice," \u20ac"]}),(0,O.jsxs)(y.A,{variant:"h6",color:"error.main",sx:{fontWeight:"bold"},children:[i.discountedPrice," \u20ac"]})]}):(0,O.jsxs)(y.A,{variant:"h6",sx:{fontWeight:"bold"},children:[i.oldPrice," \u20ac"]}),(0,O.jsx)(b.A,{title:"D\xe9tails du produit",children:(0,O.jsx)(v.A,{component:L.N_,to:`/products/${i._id}`,size:"small",sx:{color:"text.secondary","&:hover":{color:"primary.main",transform:"scale(1.1)"},transition:"all 0.3s ease"},children:(0,O.jsx)(We.A,{fontSize:"small"})})})]})]}),(0,O.jsx)(_e.A,{sx:{p:2,pt:0},children:(0,O.jsx)(f.A,{variant:"contained",startIcon:(0,O.jsx)($.A,{}),fullWidth:!0,onClick:e=>{try{if(e.preventDefault(),0===i.quantite)return void ke.oR.error("Produit en rupture de stock");s(i),ke.oR.success("Produit ajout\xe9 au panier")}catch(t){console.error("Erreur lors de l'ajout au panier:",t),ke.oR.error("Une erreur est survenue")}},disabled:0===i.quantite,sx:{borderRadius:2,textTransform:"none","&:not(:disabled):hover":{transform:"scale(1.02)",boxShadow:4},transition:"all 0.3s ease"},children:0===i.quantite?"\xc9puis\xe9":"Ajouter au panier"})})]})})},qe=()=>{const{id:e}=(0,s.g)(),t=(0,s.Zp)(),[i,n]=(0,r.useState)(null),[o,a]=(0,r.useState)([]),[d,h]=(0,r.useState)(!0),[m,u]=(0,r.useState)(""),[p,j]=(0,r.useState)(0),[A,g]=(0,r.useState)({open:!1,message:"",severity:"success"}),{addToCart:b}=(0,M._)(),{addToWishlist:v}=(0,T.n)();(0,r.useEffect)((()=>{(async()=>{try{h(!0);const t=await ve.A.get(`/products/${e}`);if(n(t.data),t.data.mainPicture?u(t.data.mainPicture):t.data.pictures&&t.data.pictures.length>0&&u(t.data.pictures[0]),t.data.categoriesa_id&&t.data.categoriesa_id.length>0){const i="object"===typeof t.data.categoriesa_id[0]?t.data.categoriesa_id[0]._id:t.data.categoriesa_id[0],r=(await ve.A.get(`/products/category/${i}`)).data.filter((t=>t._id!==e)).slice(0,4);a(r)}h(!1)}catch(i){console.error("Erreur lors du chargement des donn\xe9es du produit:",i),t("/404"),h(!1)}})()}),[e,t]);const w=(e,t)=>{"clickaway"!==t&&g((e=>({...e,open:!1})))};return d?(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsx)(l.A,{sx:{mb:4},children:(0,O.jsx)(ne.A,{variant:"text",width:"50%",height:30})}),(0,O.jsxs)(Z.Ay,{container:!0,spacing:4,children:[(0,O.jsxs)(Z.Ay,{item:!0,xs:12,md:6,children:[(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:400,sx:{borderRadius:2,mb:2}}),(0,O.jsx)(l.A,{sx:{display:"flex",gap:1},children:[1,2,3,4].map((e=>(0,O.jsx)(ne.A,{variant:"rectangular",width:80,height:80,sx:{borderRadius:1}},e)))})]}),(0,O.jsxs)(Z.Ay,{item:!0,xs:12,md:6,children:[(0,O.jsx)(ne.A,{variant:"text",width:"80%",height:40}),(0,O.jsx)(ne.A,{variant:"text",width:"60%",height:30,sx:{mb:2}}),(0,O.jsx)(ne.A,{variant:"text",width:"40%",height:60,sx:{mb:2}}),(0,O.jsx)(ne.A,{variant:"text",width:"100%",height:100,sx:{mb:2}}),(0,O.jsx)(ne.A,{variant:"rectangular",width:180,height:50,sx:{borderRadius:1}})]})]})]}):i?(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsx)(l.A,{sx:{mb:4},children:(0,O.jsxs)(je.A,{"aria-label":"breadcrumb",children:[(0,O.jsx)(X.A,{component:L.N_,underline:"hover",color:"inherit",to:"/",children:"Accueil"}),i.categoriesa_id&&i.categoriesa_id.length>0&&(0,O.jsx)(X.A,{component:L.N_,underline:"hover",color:"inherit",to:`/categories/${"object"===typeof i.categoriesa_id[0]?i.categoriesa_id[0]._id:i.categoriesa_id[0]}`,children:"object"===typeof i.categoriesa_id[0]?i.categoriesa_id[0].name:"Cat\xe9gorie"}),(0,O.jsx)(y.A,{color:"text.primary",children:i.nom})]})}),(0,O.jsxs)(Z.Ay,{container:!0,spacing:4,children:[(0,O.jsx)(Z.Ay,{item:!0,xs:12,md:6,children:(0,O.jsxs)(x.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,O.jsx)(l.A,{sx:{mb:2,borderRadius:2,overflow:"hidden",boxShadow:3,bgcolor:"background.paper",height:400,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,O.jsx)("img",{src:m||"https://via.placeholder.com/600x400?text=Produit",alt:i.nom,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})}),i.pictures&&i.pictures.length>1&&(0,O.jsx)(l.A,{sx:{mt:2},children:(0,O.jsx)(Pe.A,{dots:!1,infinite:!1,speed:500,slidesToShow:4,slidesToScroll:1,responsive:[{breakpoint:960,settings:{slidesToShow:3}},{breakpoint:600,settings:{slidesToShow:2}}],children:i.pictures.map(((e,t)=>(0,O.jsx)(l.A,{sx:{p:.5,cursor:"pointer"},children:(0,O.jsx)(l.A,{sx:{width:80,height:80,overflow:"hidden",borderRadius:1,border:m===e?"2px solid":"1px solid",borderColor:m===e?"primary.main":"grey.300"},onClick:()=>(e=>{u(e)})(e),children:(0,O.jsx)("img",{src:e,alt:`${i.nom} - Image ${t+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}})})},t)))})})]})}),(0,O.jsx)(Z.Ay,{item:!0,xs:12,md:6,children:(0,O.jsxs)(x.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:[(0,O.jsx)(y.A,{variant:"h4",component:"h1",gutterBottom:!0,children:i.nom}),(0,O.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,O.jsx)(y.A,{variant:"subtitle1",component:"div",color:"text.secondary",children:"Marque:"}),(0,O.jsx)(X.A,{component:L.N_,to:`/companies/${"object"===typeof i.Company_id?i.Company_id._id:i.Company_id}`,underline:"hover",color:"primary",sx:{ml:1},children:"object"===typeof i.Company_id?i.Company_id.nom:"Entreprise"})]}),(0,O.jsx)(l.A,{sx:{mb:3},children:i.discountedPrice?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,O.jsxs)(y.A,{variant:"h5",color:"text.secondary",sx:{textDecoration:"line-through",mr:2},children:[i.oldPrice," \u20ac"]}),(0,O.jsxs)(y.A,{variant:"h4",color:"error.main",fontWeight:"bold",children:[i.discountedPrice," \u20ac"]}),(0,O.jsx)(Ae.A,{label:`-${Math.round(100*(1-i.discountedPrice/i.oldPrice))}%`,color:"error",size:"small",sx:{ml:2}})]}),i.discountDuration&&(0,O.jsxs)(y.A,{variant:"body2",color:"error",children:["Promotion valable jusqu'au ",new Date(i.discountDuration).toLocaleDateString()]})]}):(0,O.jsxs)(y.A,{variant:"h4",fontWeight:"bold",children:[i.oldPrice," \u20ac"]})}),(0,O.jsx)(l.A,{sx:{mb:3},children:void 0!==i.quantite&&(0,O.jsx)(Ae.A,{label:i.quantite>10?"En stock":i.quantite>0?`Plus que ${i.quantite} en stock`:"Rupture de stock",color:i.quantite>10?"success":i.quantite>0?"warning":"error",variant:"outlined"})}),(0,O.jsx)(y.A,{variant:"body1",paragraph:!0,children:i.description||"Aucune description disponible pour ce produit."}),(0,O.jsxs)(l.A,{sx:{mt:4,display:"flex",gap:2},children:[(0,O.jsx)(f.A,{variant:"contained",size:"large",startIcon:(0,O.jsx)($.A,{}),disabled:0===i.quantite,sx:{flexGrow:1},onClick:()=>{i&&i.quantite>0&&(b(i),g({open:!0,message:`${i.nom} a \xe9t\xe9 ajout\xe9 \xe0 votre panier`,severity:"success"}))},children:"Ajouter au panier"}),(0,O.jsx)(f.A,{variant:"outlined",startIcon:(0,O.jsx)(D.A,{}),onClick:()=>{i&&(v(i),g({open:!0,message:`${i.nom} a \xe9t\xe9 ajout\xe9 \xe0 vos favoris`,severity:"success"}))},children:"Favoris"})]})]})})]}),(0,O.jsx)(l.A,{sx:{mt:6,mb:4},children:(0,O.jsxs)(fe.A,{sx:{boxShadow:3},children:[(0,O.jsxs)(ge.A,{value:p,onChange:(e,t)=>{j(t)},variant:"fullWidth",children:[(0,O.jsx)(be.A,{label:"D\xe9tails"}),(0,O.jsx)(be.A,{label:"Caract\xe9ristiques"}),i.categoriesa_id&&i.categoriesa_id.length>0&&(0,O.jsx)(be.A,{label:"Cat\xe9gories"})]}),(0,O.jsxs)(l.A,{sx:{p:3},children:[0===p&&(0,O.jsxs)(l.A,{children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"D\xe9tails du produit"}),(0,O.jsx)(y.A,{variant:"body1",paragraph:!0,children:i.description||"Aucune description d\xe9taill\xe9e disponible pour ce produit."})]}),1===p&&(0,O.jsxs)(l.A,{children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Caract\xe9ristiques"}),i.features?(0,O.jsx)(y.A,{variant:"body1",children:i.features}):(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",children:"Aucune caract\xe9ristique sp\xe9cifi\xe9e pour ce produit."})]}),2===p&&i.categoriesa_id&&i.categoriesa_id.length>0&&(0,O.jsxs)(l.A,{children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Cat\xe9gories"}),(0,O.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:i.categoriesa_id.map(((e,t)=>(0,O.jsx)(Ae.A,{label:"object"===typeof e?e.name:"Cat\xe9gorie",component:L.N_,to:`/categories/${"object"===typeof e?e._id:e}`,clickable:!0,color:"primary",variant:"outlined"},t)))}),i.subcategories_id&&i.subcategories_id.length>0&&(0,O.jsxs)(l.A,{sx:{mt:2},children:[(0,O.jsx)(y.A,{variant:"subtitle1",gutterBottom:!0,children:"Sous-cat\xe9gories"}),(0,O.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:i.subcategories_id.map(((e,t)=>(0,O.jsx)(Ae.A,{label:"object"===typeof e?e.name:"Sous-cat\xe9gorie",component:L.N_,to:`/categories/${"object"===typeof e.categories_id?e.categories_id._id:e.categories_id}`,clickable:!0,color:"secondary",variant:"outlined",size:"small"},t)))})]})]})]})]})}),o.length>0&&(0,O.jsxs)(l.A,{sx:{mt:8,mb:4},children:[(0,O.jsx)(y.A,{variant:"h5",gutterBottom:!0,children:"Produits similaires"}),(0,O.jsx)(oe.A,{sx:{mb:3}}),(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:o.map(((e,t)=>(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,O.jsx)(Re,{product:e,index:t})},e._id)))})]}),(0,O.jsx)(we.A,{open:A.open,autoHideDuration:4e3,onClose:w,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,O.jsx)(Ce.A,{onClose:w,severity:A.severity,variant:"filled",sx:{width:"100%"},children:A.message})})]}):(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsx)(y.A,{variant:"h5",color:"error",sx:{mt:4},children:"Produit non trouv\xe9"}),(0,O.jsx)(f.A,{component:L.N_,to:"/",variant:"contained",sx:{mt:2},children:"Retour \xe0 l'accueil"})]})};var Ie=i(29925),Ne=i(2046),ze=i(61188),Be=i(25979),De=i(3788),$e=i(16101),Fe=i(23266),Ee=i(82825),Le=i(7084),Me=i(8321);const Te=()=>{const e=new URLSearchParams((0,s.zy)().search),t=(0,s.Zp)(),i=(0,s.zy)(),[n,o]=(0,r.useState)([]),[a,d]=(0,r.useState)([]),[h,m]=(0,r.useState)(!0),[u,p]=(0,r.useState)(e.get("q")||""),[j,A]=(0,r.useState)(0),[g,b]=(0,r.useState)(1),[v,f]=(0,r.useState)([0,1e3]),[w,C]=(0,r.useState)([]),[P,_]=(0,r.useState)("true"===e.get("discount")),[k,S]=(0,r.useState)("relevance");(0,r.useEffect)((()=>{(async()=>{try{m(!0);let e={};u&&(e.q=u),w.length>0&&(e.categoryId=w.join(",")),(v[0]>0||v[1]<1e3)&&(e.minPrice=v[0],e.maxPrice=v[1]),P&&(e.hasDiscount="true");let t=[...(await ve.A.get("/products",{params:e})).data];if("priceAsc"===k?t.sort(((e,t)=>(e.discountedPrice||e.oldPrice)-(t.discountedPrice||t.oldPrice))):"priceDesc"===k?t.sort(((e,t)=>(t.discountedPrice||t.oldPrice)-(e.discountedPrice||e.oldPrice))):"newest"===k&&t.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))),o(t),A(t.length),0===a.length){const e=await ve.A.get("/categories");d(e.data)}m(!1)}catch(e){console.error("Erreur lors de la recherche de produits:",e),m(!1)}})()}),[u,w,v,P,k,g]);const W=e=>{w.includes(e)?C(w.filter((t=>t!==e))):C([...w,e]),b(1)},R=()=>{_(!P),b(1);const e=new URLSearchParams;u&&e.set("q",u),P||e.set("discount","true"),t({pathname:i.pathname,search:e.toString()})},q=Math.ceil(j/12),I=n.slice(12*(g-1),12*g);return h?(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsxs)(l.A,{sx:{mb:4},children:[(0,O.jsx)(ne.A,{variant:"text",width:"50%",height:40}),(0,O.jsx)(ne.A,{variant:"text",width:"30%",height:30})]}),(0,O.jsxs)(Z.Ay,{container:!0,spacing:3,children:[(0,O.jsx)(Z.Ay,{item:!0,xs:12,md:3,children:(0,O.jsx)(ne.A,{variant:"rectangular",height:400,width:"100%",sx:{borderRadius:2}})}),(0,O.jsx)(Z.Ay,{item:!0,xs:12,md:9,children:(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:[1,2,3,4,5,6].map((e=>(0,O.jsxs)(Z.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,O.jsx)(ne.A,{variant:"rectangular",height:300,width:"100%",sx:{borderRadius:2,mb:1}}),(0,O.jsx)(ne.A,{variant:"text",width:"80%"}),(0,O.jsx)(ne.A,{variant:"text",width:"40%"})]},e)))})})]})]}):(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsxs)(l.A,{sx:{mb:4},children:[(0,O.jsxs)(je.A,{"aria-label":"breadcrumb",children:[(0,O.jsx)(X.A,{component:L.N_,underline:"hover",color:"inherit",to:"/",children:"Accueil"}),(0,O.jsx)(y.A,{color:"text.primary",children:"Recherche"})]}),(0,O.jsx)(y.A,{variant:"h4",component:"h1",sx:{mt:2},children:(()=>{if(P)return"Produits en promotion";if(u)return`R\xe9sultats pour "${u}"`;if(w.length>0){return`Produits ${w.map((e=>{const t=a.find((t=>t._id===e));return t?t.name:""})).filter(Boolean).join(", ")}`}return"Tous les produits"})()}),j>0?(0,O.jsxs)(y.A,{variant:"subtitle1",color:"text.secondary",children:[j," r\xe9sultat",j>1?"s":""," trouv\xe9",j>1?"s":""]}):(0,O.jsx)(y.A,{variant:"subtitle1",color:"text.secondary",children:"Aucun r\xe9sultat trouv\xe9"})]}),(0,O.jsxs)(Z.Ay,{container:!0,spacing:3,children:[(0,O.jsx)(Z.Ay,{item:!0,xs:12,md:3,children:(0,O.jsxs)(fe.A,{sx:{p:3,borderRadius:2,boxShadow:2},children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Rechercher"}),(0,O.jsx)(Ie.A,{fullWidth:!0,placeholder:"Rechercher des produits...",defaultValue:u,onKeyPress:e=>{if("Enter"===e.key){p(e.target.value),b(1);const r=new URLSearchParams;e.target.value&&r.set("q",e.target.value),P&&r.set("discount","true"),t({pathname:i.pathname,search:r.toString()})}},InputProps:{startAdornment:(0,O.jsx)(Ne.A,{position:"start",children:(0,O.jsx)(B.A,{})})},sx:{mb:3}}),(0,O.jsx)(oe.A,{sx:{my:2}}),(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Cat\xe9gories"}),(0,O.jsx)(l.A,{sx:{mb:3},children:a.map((e=>(0,O.jsx)(l.A,{sx:{display:"flex",alignItems:"center",mb:1,"&:hover":{color:"primary.main",cursor:"pointer"},color:w.includes(e._id)?"primary.main":"inherit",fontWeight:w.includes(e._id)?"bold":"normal"},onClick:()=>W(e._id),children:(0,O.jsx)(y.A,{variant:"body2",children:e.name})},e._id)))}),(0,O.jsx)(oe.A,{sx:{my:2}}),(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Prix"}),(0,O.jsx)(ze.Ay,{value:v,onChange:(e,t)=>{f(t)},valueLabelDisplay:"auto",min:0,max:1e3,sx:{mb:2}}),(0,O.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,O.jsxs)(y.A,{variant:"body2",children:[v[0]," \u20ac"]}),(0,O.jsxs)(y.A,{variant:"body2",children:[v[1]," \u20ac ",1e3===v[1]?"+":""]})]}),(0,O.jsx)(oe.A,{sx:{my:2}}),(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Promotions"}),(0,O.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:1,"&:hover":{color:"primary.main",cursor:"pointer"},color:P?"error.main":"inherit",fontWeight:P?"bold":"normal"},onClick:R,children:[(0,O.jsx)(Le.A,{sx:{mr:1,fontSize:20}}),(0,O.jsx)(y.A,{variant:"body2",children:"Produits en promotion"})]})]})}),(0,O.jsxs)(Z.Ay,{item:!0,xs:12,md:9,children:[(0,O.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,O.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,O.jsx)(Me.A,{sx:{mr:1}}),(0,O.jsx)(y.A,{variant:"body1",children:"Filtres actifs:"}),(0,O.jsxs)(l.A,{sx:{display:"flex",ml:1,flexWrap:"wrap"},children:[w.map((e=>{const t=a.find((t=>t._id===e));return t?(0,O.jsx)(Ae.A,{label:t.name,size:"small",onDelete:()=>W(e),sx:{mr:1,mb:1}},e):null})),(v[0]>0||v[1]<1e3)&&(0,O.jsx)(Ae.A,{label:`Prix: ${v[0]}\u20ac - ${v[1]}\u20ac`,size:"small",onDelete:()=>f([0,1e3]),sx:{mr:1,mb:1}}),P&&(0,O.jsx)(Ae.A,{label:"En promotion",size:"small",color:"error",onDelete:R,sx:{mr:1,mb:1}})]})]}),(0,O.jsxs)(Be.A,{sx:{minWidth:150},children:[(0,O.jsx)(De.A,{id:"sort-select-label",children:"Trier par"}),(0,O.jsxs)($e.A,{labelId:"sort-select-label",id:"sort-select",value:k,label:"Trier par",onChange:e=>{S(e.target.value)},size:"small",children:[(0,O.jsx)(Fe.A,{value:"relevance",children:"Pertinence"}),(0,O.jsx)(Fe.A,{value:"priceAsc",children:"Prix croissant"}),(0,O.jsx)(Fe.A,{value:"priceDesc",children:"Prix d\xe9croissant"}),(0,O.jsx)(Fe.A,{value:"newest",children:"Plus r\xe9cent"})]})]})]}),I.length>0?(0,O.jsxs)(x.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:[(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:I.map(((e,t)=>(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,O.jsx)(Re,{product:e,index:t})},e._id)))}),q>1&&(0,O.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",mt:4},children:(0,O.jsx)(Ee.A,{count:q,page:g,onChange:(e,t)=>{b(t),window.scrollTo(0,0)},color:"primary",showFirstButton:!0,showLastButton:!0})})]}):(0,O.jsxs)(fe.A,{sx:{p:4,textAlign:"center",borderRadius:2,boxShadow:2},children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Aucun r\xe9sultat trouv\xe9"}),(0,O.jsx)(y.A,{variant:"body1",paragraph:!0,children:"Essayez de modifier vos filtres ou d'utiliser des termes de recherche diff\xe9rents."})]})]})]})]})},Oe=e=>{let{category:t,index:i,compact:r=!1}=e;const s={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5,delay:i?.1*i:0}}};return(0,O.jsx)(x.P.div,{variants:s,children:(0,O.jsx)(ae.A,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:(0,O.jsxs)(le.A,{component:L.N_,to:`/categories/${t._id}`,sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch"},children:[(0,O.jsxs)(l.A,{sx:{height:r?120:180,overflow:"hidden",position:"relative"},children:[(0,O.jsx)(xe.LazyLoadImage,{src:t.logo||"https://via.placeholder.com/400x200?text=Cat\xe9gorie",alt:t.name,effect:"blur",style:{width:"100%",height:"100%",objectFit:"cover"},wrapperProps:{style:{width:"100%",height:"100%"}}}),(0,O.jsx)(l.A,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.4))"}}),!r&&t.subcategories_id&&t.subcategories_id.length>0&&(0,O.jsx)(Ae.A,{label:`${t.subcategories_id.length} sous-cat\xe9gorie${t.subcategories_id.length>1?"s":""}`,size:"small",sx:{position:"absolute",top:10,right:10,bgcolor:"rgba(255,255,255,0.9)",color:"text.primary"}})]}),(0,O.jsxs)(ce.A,{sx:{flexGrow:1},children:[(0,O.jsx)(y.A,{variant:r?"h6":"h5",component:"div",gutterBottom:!0,title:t.name,noWrap:r,children:t.name}),!r&&t.description&&(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.description})]})]})})})},Ve=()=>{const{id:e}=(0,s.g)(),t=(0,s.Zp)(),[i,n]=(0,r.useState)(null),[o,a]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[m,u]=(0,r.useState)(!0),[p,j]=(0,r.useState)(0);(0,r.useEffect)((()=>{(async()=>{try{u(!0);const t=await ve.A.get(`/companies/${e}`);n(t.data);const i=await ve.A.get("/products",{params:{companies:e}});a(i.data),t.data.categories_id&&h(t.data.categories_id),u(!1)}catch(i){console.error("Erreur lors du chargement des donn\xe9es de l'entreprise:",i),t("/404"),u(!1)}})()}),[e,t]);const A={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return m?(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsx)(l.A,{sx:{mb:4},children:(0,O.jsx)(ne.A,{variant:"text",width:"50%",height:30})}),(0,O.jsxs)(Z.Ay,{container:!0,spacing:4,children:[(0,O.jsxs)(Z.Ay,{item:!0,xs:12,md:3,children:[(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:200,sx:{borderRadius:2,mb:2}}),(0,O.jsx)(ne.A,{variant:"text",width:"80%",height:30}),(0,O.jsx)(ne.A,{variant:"text",width:"60%",height:20}),(0,O.jsx)(ne.A,{variant:"text",width:"40%",height:20})]}),(0,O.jsxs)(Z.Ay,{item:!0,xs:12,md:9,children:[(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:50,sx:{mb:2}}),(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:[1,2,3,4,5,6].map((e=>(0,O.jsxs)(Z.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:200,sx:{borderRadius:2,mb:1}}),(0,O.jsx)(ne.A,{variant:"text",width:"80%"}),(0,O.jsx)(ne.A,{variant:"text",width:"40%"})]},e)))})]})]})]}):i?(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsx)(l.A,{sx:{mb:4},children:(0,O.jsxs)(je.A,{"aria-label":"breadcrumb",children:[(0,O.jsx)(X.A,{component:L.N_,underline:"hover",color:"inherit",to:"/",children:"Accueil"}),(0,O.jsx)(X.A,{component:L.N_,underline:"hover",color:"inherit",to:"/companies",children:"Marques"}),(0,O.jsx)(y.A,{color:"text.primary",children:i.nom})]})}),(0,O.jsxs)(Z.Ay,{container:!0,spacing:4,children:[(0,O.jsx)(Z.Ay,{item:!0,xs:12,md:3,children:(0,O.jsxs)(x.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,O.jsxs)(fe.A,{sx:{p:3,borderRadius:2,boxShadow:2,display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[(0,O.jsx)(l.A,{sx:{width:"100%",height:200,display:"flex",alignItems:"center",justifyContent:"center",mb:2,bgcolor:"grey.100",borderRadius:1,overflow:"hidden"},children:i.logo?(0,O.jsx)("img",{src:i.logo,alt:i.nom,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}):(0,O.jsx)(y.A,{variant:"h6",color:"text.secondary",children:"Logo non disponible"})}),(0,O.jsx)(y.A,{variant:"h5",component:"h1",align:"center",gutterBottom:!0,children:i.nom}),d.length>0&&(0,O.jsxs)(l.A,{sx:{mt:2},children:[(0,O.jsx)(y.A,{variant:"subtitle2",gutterBottom:!0,children:"Cat\xe9gories:"}),(0,O.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:d.map((e=>(0,O.jsx)(Ae.A,{label:"object"===typeof e?e.name:"Cat\xe9gorie",component:L.N_,to:`/categories/${"object"===typeof e?e._id:e}`,clickable:!0,size:"small",sx:{mb:.5}},"object"===typeof e?e._id:e)))})]})]}),(0,O.jsxs)(fe.A,{sx:{p:3,borderRadius:2,boxShadow:2},children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Statistiques"}),(0,O.jsx)(oe.A,{sx:{mb:2}}),(0,O.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,O.jsx)(y.A,{variant:"body2",children:"Produits:"}),(0,O.jsx)(y.A,{variant:"body2",fontWeight:"bold",children:o.length})]}),(0,O.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,O.jsx)(y.A,{variant:"body2",children:"Cat\xe9gories:"}),(0,O.jsx)(y.A,{variant:"body2",fontWeight:"bold",children:d.length})]}),(0,O.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,O.jsx)(y.A,{variant:"body2",children:"Promotions:"}),(0,O.jsx)(y.A,{variant:"body2",fontWeight:"bold",children:o.filter((e=>e.discountedPrice)).length})]})]})]})}),(0,O.jsxs)(Z.Ay,{item:!0,xs:12,md:9,children:[(0,O.jsx)(fe.A,{sx:{borderRadius:2,boxShadow:2,mb:3},children:(0,O.jsxs)(ge.A,{value:p,onChange:(e,t)=>{j(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",children:[(0,O.jsx)(be.A,{label:"Produits"}),(0,O.jsx)(be.A,{label:"Cat\xe9gories"}),o.some((e=>e.discountedPrice))&&(0,O.jsx)(be.A,{label:"Promotions"})]})}),0===p&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(y.A,{variant:"h5",gutterBottom:!0,children:["Produits de ",i.nom]}),o.length>0?(0,O.jsx)(x.P.div,{variants:A,initial:"hidden",animate:"visible",children:(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:o.map(((e,t)=>(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,O.jsx)(Re,{product:e,index:t})},e._id)))})}):(0,O.jsx)(fe.A,{sx:{p:3,borderRadius:2,textAlign:"center"},children:(0,O.jsx)(y.A,{variant:"body1",color:"text.secondary",children:"Aucun produit trouv\xe9 pour cette entreprise."})})]}),1===p&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(y.A,{variant:"h5",gutterBottom:!0,children:["Cat\xe9gories de ",i.nom]}),d.length>0?(0,O.jsx)(x.P.div,{variants:A,initial:"hidden",animate:"visible",children:(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:d.map(((e,t)=>(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:4,children:"object"===typeof e?(0,O.jsx)(Oe,{category:e,index:t}):(0,O.jsx)(fe.A,{sx:{p:3,borderRadius:2,textAlign:"center"},children:(0,O.jsx)(y.A,{variant:"body1",color:"text.secondary",children:"Cat\xe9gorie non disponible"})})},"object"===typeof e?e._id:t)))})}):(0,O.jsx)(fe.A,{sx:{p:3,borderRadius:2,textAlign:"center"},children:(0,O.jsx)(y.A,{variant:"body1",color:"text.secondary",children:"Aucune cat\xe9gorie trouv\xe9e pour cette entreprise."})})]}),2===p&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(y.A,{variant:"h5",gutterBottom:!0,children:["Promotions de ",i.nom]}),(0,O.jsx)(x.P.div,{variants:A,initial:"hidden",animate:"visible",children:(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:o.filter((e=>e.discountedPrice)).map(((e,t)=>(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,O.jsx)(Re,{product:e,index:t})},e._id)))})})]})]})]})]}):(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsx)(y.A,{variant:"h5",color:"error",sx:{mt:4},children:"Entreprise non trouv\xe9e"}),(0,O.jsx)(X.A,{component:L.N_,to:"/",variant:"contained",sx:{mt:2,display:"inline-block"},children:"Retour \xe0 l'accueil"})]})};var Ge=i(57191);const He=()=>{const[e,t]=(0,r.useState)([]),[i,s]=(0,r.useState)(!0),[n,o]=(0,r.useState)(""),[a,d]=(0,r.useState)([]),h=(0,r.useCallback)((async()=>{try{s(!0);const e=await ve.A.get("/categories");t(e.data),d(e.data),s(!1)}catch(e){console.error("Erreur lors du chargement des cat\xe9gories:",e),s(!1)}}),[]);(0,r.useEffect)((()=>{h()}),[h]),(0,r.useEffect)((()=>{const t=e.filter((e=>e.name.toLowerCase().includes(n.toLowerCase())));d(t)}),[n,e]);const m={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};return i?(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsxs)(l.A,{sx:{mb:4},children:[(0,O.jsx)(ne.A,{variant:"text",width:"30%",height:40}),(0,O.jsx)(ne.A,{variant:"text",width:"60%",height:30})]}),(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:[1,2,3,4,5,6].map((e=>(0,O.jsxs)(Z.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:200,sx:{borderRadius:2,mb:1}}),(0,O.jsx)(ne.A,{variant:"text",width:"80%"}),(0,O.jsx)(ne.A,{variant:"text",width:"40%"})]},e)))})]}):(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsxs)(l.A,{sx:{mb:4},children:[(0,O.jsxs)(je.A,{"aria-label":"breadcrumb",sx:{mb:2},children:[(0,O.jsx)(X.A,{component:L.N_,underline:"hover",color:"inherit",to:"/",children:"Accueil"}),(0,O.jsx)(y.A,{color:"text.primary",children:"Cat\xe9gories"})]}),(0,O.jsx)(y.A,{variant:"h4",component:"h1",sx:{mb:2,fontWeight:"bold",background:"-webkit-linear-gradient(45deg, #3494E6, #2196F3)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Toutes les cat\xe9gories"}),(0,O.jsx)(y.A,{variant:"subtitle1",color:"text.secondary",sx:{mb:3},children:"Parcourez notre s\xe9lection de cat\xe9gories pour trouver les produits qui vous int\xe9ressent"}),(0,O.jsx)(Ie.A,{fullWidth:!0,variant:"outlined",placeholder:"Rechercher une cat\xe9gorie...",value:n,onChange:e=>o(e.target.value),sx:{mb:4},InputProps:{startAdornment:(0,O.jsx)(Ne.A,{position:"start",children:(0,O.jsx)(B.A,{color:"action"})}),sx:{borderRadius:3,"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(0, 0, 0, 0.23)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}}})]}),0===a.length?(0,O.jsx)(Ge.A,{in:!0,children:(0,O.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"50vh",textAlign:"center"},children:[(0,O.jsx)(y.A,{variant:"h6",color:"text.secondary",children:"Aucune cat\xe9gorie trouv\xe9e"}),(0,O.jsx)(y.A,{variant:"body2",color:"text.disabled",children:"Essayez un autre terme de recherche"})]})}):(0,O.jsx)(x.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:(0,O.jsx)(Z.Ay,{container:!0,spacing:3,sx:{display:"flex",alignItems:"stretch"},children:a.map(((e,t)=>(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:4,component:x.P.div,variants:m,children:(0,O.jsx)(Oe,{category:e,index:t})},e._id)))})})]})},Ue=()=>{const e=(0,j.A)(),[t,i]=((0,A.A)(e.breakpoints.down("sm")),(0,r.useState)([])),[s,n]=(0,r.useState)([]),[o,a]=(0,r.useState)(!0),[d,h]=(0,r.useState)("");(0,r.useEffect)((()=>{(async()=>{try{a(!0);const e=await ve.A.get("/companies");i(e.data),n(e.data),a(!1)}catch(e){console.error("Erreur lors du chargement des entreprises:",e),a(!1)}})()}),[]),(0,r.useEffect)((()=>{const e=t.filter((e=>e.nom.toLowerCase().includes(d.toLowerCase())));n(e)}),[d,t]);const m=(0,r.useMemo)((()=>{const e=new Set(s.map((e=>e.nom.charAt(0).toUpperCase())));return Array.from(e).sort()}),[s]),u=(0,r.useMemo)((()=>{const e={};return s.forEach((t=>{const i=t.nom.charAt(0).toUpperCase();e[i]||(e[i]=[]),e[i].push(t)})),Object.keys(e).forEach((t=>{e[t].sort(((e,t)=>e.nom.localeCompare(t.nom)))})),e}),[s]),p={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};return o?(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsxs)(l.A,{sx:{mb:4},children:[(0,O.jsx)(ne.A,{variant:"text",width:"30%",height:40}),(0,O.jsx)(ne.A,{variant:"text",width:"60%",height:30})]}),(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:50,sx:{mb:4}}),(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:[1,2,3,4,5,6,7,8,9,10,11,12].map((e=>(0,O.jsxs)(Z.Ay,{item:!0,xs:6,sm:4,md:3,children:[(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:100,sx:{borderRadius:2,mb:1}}),(0,O.jsx)(ne.A,{variant:"text",width:"80%"})]},e)))})]}):(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsxs)(l.A,{sx:{mb:4},children:[(0,O.jsxs)(je.A,{"aria-label":"breadcrumb",sx:{mb:2},children:[(0,O.jsx)(X.A,{component:L.N_,underline:"hover",color:"inherit",to:"/",children:"Accueil"}),(0,O.jsx)(y.A,{color:"text.primary",children:"Marques"})]}),(0,O.jsx)(y.A,{variant:"h4",component:"h1",sx:{mb:2,fontWeight:"bold",background:"-webkit-linear-gradient(45deg, #3494E6, #2196F3)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Toutes les marques"}),(0,O.jsx)(y.A,{variant:"subtitle1",color:"text.secondary",sx:{mb:3},children:"D\xe9couvrez notre s\xe9lection de marques et leurs produits"})]}),(0,O.jsx)(fe.A,{sx:{p:2,mb:4,borderRadius:2,boxShadow:2,transition:"all 0.3s ease"},children:(0,O.jsx)(Ie.A,{fullWidth:!0,placeholder:"Rechercher une marque...",value:d,onChange:e=>h(e.target.value),InputProps:{startAdornment:(0,O.jsx)(Ne.A,{position:"start",children:(0,O.jsx)(B.A,{color:"action"})}),endAdornment:d&&(0,O.jsx)(Ne.A,{position:"end",children:(0,O.jsx)(X.A,{component:"button",onClick:()=>h(""),sx:{color:"text.secondary"},children:"Effacer"})}),sx:{borderRadius:3,"& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(0, 0, 0, 0.23)"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"primary.main"}}}})}),!d&&(0,O.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:3},children:m.map((e=>(0,O.jsx)(X.A,{href:`#letter-${e}`,underline:"hover",sx:{width:35,height:35,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",bgcolor:"primary.light",color:"white",textDecoration:"none",fontWeight:"bold",transition:"all 0.3s ease","&:hover":{bgcolor:"primary.main",transform:"scale(1.1)"}},children:e},e)))}),s.length>0?(0,O.jsx)(x.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},initial:"hidden",animate:"visible",children:Object.keys(u).sort().map((e=>(0,O.jsxs)(l.A,{id:`letter-${e}`,children:[(0,O.jsx)(y.A,{variant:"h5",sx:{mt:4,mb:2,borderBottom:"2px solid",borderColor:"primary.main",paddingBottom:1},children:e}),(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:u[e].map(((e,t)=>(0,O.jsx)(Z.Ay,{item:!0,xs:6,sm:4,md:3,children:(0,O.jsx)(x.P.div,{variants:p,children:(0,O.jsx)(ae.A,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"all 0.3s ease","&:hover":{boxShadow:6,transform:"translateY(-10px)"}},elevation:2,children:(0,O.jsxs)(le.A,{component:L.N_,to:`/companies/${e._id}`,sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch"},children:[(0,O.jsx)(l.A,{sx:{height:120,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"grey.100",p:2},children:e.logo?(0,O.jsx)(xe.LazyLoadImage,{src:e.logo,alt:e.nom,effect:"blur",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}):(0,O.jsx)(N.A,{sx:{fontSize:60,color:"grey.400"}})}),(0,O.jsx)(ce.A,{sx:{flexGrow:1,pt:2},children:(0,O.jsx)(y.A,{variant:"h6",component:"div",align:"center",noWrap:!0,children:e.nom})})]})})})},e._id)))})]},e)))}):(0,O.jsxs)(fe.A,{sx:{p:4,textAlign:"center",borderRadius:2,boxShadow:2},children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Aucune marque trouv\xe9e"}),(0,O.jsx)(y.A,{variant:"body1",children:"Essayez un autre terme de recherche."})]})]})};var Ye=i(93230),Ze=i(31902);const Xe=()=>{const[e,t]=(0,r.useState)([]),[i,s]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[a,d]=(0,r.useState)(""),[h,m]=(0,r.useState)({category:"",company:"",priceRange:[0,1e3],onSale:!1}),[u,p]=(0,r.useState)([]),[j,A]=(0,r.useState)([]);(0,r.useEffect)((()=>{(async()=>{try{o(!0);const[e,i,r]=await Promise.all([he.A.get("/products"),he.A.get("/categories"),he.A.get("/companies")]);t(e.data),p(i.data),A(r.data),s(e.data),o(!1)}catch(e){console.error("Erreur lors du chargement des donn\xe9es:",e),o(!1)}})()}),[]),(0,r.useEffect)((()=>{let t=e;a&&(t=t.filter((e=>e.nom.toLowerCase().includes(a.toLowerCase())))),h.category&&(t=t.filter((e=>{var t;return(null===(t=e.Category_id)||void 0===t?void 0:t.name)===h.category}))),h.company&&(t=t.filter((e=>{var t;return(null===(t=e.Company_id)||void 0===t?void 0:t.nom)===h.company}))),t=t.filter((e=>e.oldPrice>=h.priceRange[0]&&e.oldPrice<=h.priceRange[1])),h.onSale&&(t=t.filter((e=>e.discountedPrice))),s(t)}),[a,h,e]);const g=()=>{m({category:"",company:"",priceRange:[0,1e3],onSale:!1}),d("")},b={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{duration:.5}}};return n?(0,O.jsxs)(c.A,{maxWidth:"lg",children:[(0,O.jsxs)(l.A,{sx:{mb:4},children:[(0,O.jsx)(ne.A,{variant:"text",width:"30%",height:40}),(0,O.jsx)(ne.A,{variant:"text",width:"60%",height:30})]}),(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:[1,2,3,4,5,6,7,8,9,10,11,12].map((e=>(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,O.jsx)(ne.A,{variant:"rectangular",width:"100%",height:300,sx:{borderRadius:2}})},e)))})]}):(0,O.jsxs)(c.A,{maxWidth:"xl",children:[(0,O.jsxs)(l.A,{sx:{mb:4},children:[(0,O.jsxs)(je.A,{"aria-label":"breadcrumb",sx:{mb:2},children:[(0,O.jsx)(X.A,{component:L.N_,underline:"hover",color:"inherit",to:"/",children:"Accueil"}),(0,O.jsx)(y.A,{color:"text.primary",children:"Tous les produits"})]}),(0,O.jsx)(y.A,{variant:"h4",component:"h1",sx:{mb:2,fontWeight:"bold",background:"-webkit-linear-gradient(45deg, #3494E6, #2196F3)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Notre catalogue de produits"}),(0,O.jsx)(y.A,{variant:"subtitle1",color:"text.secondary",sx:{mb:3},children:"D\xe9couvrez notre large s\xe9lection de produits"})]}),(0,O.jsxs)(fe.A,{elevation:2,sx:{p:3,mb:4,borderRadius:2,display:"flex",flexWrap:"wrap",gap:2,alignItems:"center"},children:[(0,O.jsx)(Ie.A,{label:"Rechercher",variant:"outlined",fullWidth:!0,value:a,onChange:e=>d(e.target.value),InputProps:{startAdornment:(0,O.jsx)(Ne.A,{position:"start",children:(0,O.jsx)(B.A,{})}),endAdornment:a&&(0,O.jsx)(Ne.A,{position:"end",children:(0,O.jsx)(v.A,{onClick:()=>d(""),size:"small",children:(0,O.jsx)(Ze.A,{})})})},sx:{flex:1,minWidth:250}}),(0,O.jsxs)(Be.A,{variant:"outlined",sx:{minWidth:200},children:[(0,O.jsx)(De.A,{children:"Cat\xe9gorie"}),(0,O.jsxs)($e.A,{value:h.category,onChange:e=>m((t=>({...t,category:e.target.value}))),label:"Cat\xe9gorie",children:[(0,O.jsx)(Fe.A,{value:"",children:"Toutes les cat\xe9gories"}),u.map((e=>(0,O.jsx)(Fe.A,{value:e.name,children:e.name},e._id)))]})]}),(0,O.jsxs)(Be.A,{variant:"outlined",sx:{minWidth:200},children:[(0,O.jsx)(De.A,{children:"Marque"}),(0,O.jsxs)($e.A,{value:h.company,onChange:e=>m((t=>({...t,company:e.target.value}))),label:"Marque",children:[(0,O.jsx)(Fe.A,{value:"",children:"Toutes les marques"}),j.map((e=>(0,O.jsx)(Fe.A,{value:e.nom,children:e.nom},e._id)))]})]}),(0,O.jsxs)(l.A,{sx:{width:250},children:[(0,O.jsx)(y.A,{gutterBottom:!0,children:"Prix (\u20ac)"}),(0,O.jsx)(ze.Ay,{value:h.priceRange,onChange:(e,t)=>m((e=>({...e,priceRange:t}))),valueLabelDisplay:"auto",max:1e3,step:10})]}),(0,O.jsx)(Be.A,{children:(0,O.jsx)(f.A,{color:h.onSale?"primary":"inherit",variant:h.onSale?"contained":"outlined",onClick:()=>m((e=>({...e,onSale:!e.onSale}))),children:"Promotions"})}),(0,O.jsx)(f.A,{variant:"outlined",color:"error",onClick:g,startIcon:(0,O.jsx)(Ze.A,{}),children:"R\xe9initialiser"})]}),(a||h.category||h.company||h.onSale)&&(0,O.jsx)(l.A,{sx:{mb:3},children:(0,O.jsxs)(Ye.A,{direction:"row",spacing:1,children:[a&&(0,O.jsx)(Ae.A,{label:`Recherche: ${a}`,onDelete:()=>d("")}),h.category&&(0,O.jsx)(Ae.A,{label:`Cat\xe9gorie: ${h.category}`,onDelete:()=>m((e=>({...e,category:""})))}),h.company&&(0,O.jsx)(Ae.A,{label:`Marque: ${h.company}`,onDelete:()=>m((e=>({...e,company:""})))}),h.onSale&&(0,O.jsx)(Ae.A,{label:"Promotions",onDelete:()=>m((e=>({...e,onSale:!1})))})]})}),i.length>0?(0,O.jsx)(x.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:i.map(((e,t)=>(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,component:x.P.div,variants:b,children:(0,O.jsx)(Re,{product:e,index:t})},e._id)))})}):(0,O.jsxs)(fe.A,{sx:{p:4,textAlign:"center",borderRadius:2},children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Aucun produit trouv\xe9"}),(0,O.jsx)(y.A,{variant:"body1",children:"Essayez de modifier vos filtres ou votre recherche."}),(0,O.jsx)(f.A,{variant:"contained",color:"primary",sx:{mt:2},onClick:g,children:"R\xe9initialiser les filtres"})]})]})};var Ke=i(54637),Qe=i(2599),Je=i(53256),et=i(20760);const tt=()=>{const e=(0,j.A)(),t=(0,s.Zp)(),{cartItems:i,removeFromCart:r,updateQuantity:n,getCartTotal:o}=(0,M._)(),a={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4}}};return 0===i.length?(0,O.jsx)(c.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:(0,O.jsx)(x.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,O.jsxs)(fe.A,{elevation:3,sx:{p:6,textAlign:"center",borderRadius:2,background:`linear-gradient(to bottom, ${e.palette.background.paper}, ${e.palette.grey[50]})`},children:[(0,O.jsx)(Ke.A,{sx:{fontSize:80,color:"primary.light",mb:2,opacity:.7}}),(0,O.jsx)(y.A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"Votre panier est vide"}),(0,O.jsx)(y.A,{variant:"body1",color:"text.secondary",paragraph:!0,sx:{maxWidth:500,mx:"auto",mb:4},children:"Vous n'avez pas encore ajout\xe9 de produits \xe0 votre panier. D\xe9couvrez notre catalogue pour trouver des produits qui vous plaisent."}),(0,O.jsx)(f.A,{component:L.N_,to:"/products",variant:"contained",color:"primary",size:"large",sx:{px:4,py:1.5,borderRadius:2,boxShadow:2,"&:hover":{boxShadow:4}},children:"D\xe9couvrir nos produits"})]})})}):(0,O.jsxs)(c.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,O.jsxs)(l.A,{sx:{mb:4},children:[(0,O.jsx)(y.A,{variant:"h4",component:"h1",fontWeight:"bold",sx:{pb:1,borderBottom:`3px solid ${e.palette.primary.main}`,display:"inline-block"},children:"Mon Panier"}),(0,O.jsxs)(y.A,{variant:"subtitle1",color:"text.secondary",sx:{mt:1},children:[i.length," ",i.length>1?"articles":"article"," dans votre panier"]})]}),(0,O.jsxs)(Z.Ay,{container:!0,spacing:3,children:[(0,O.jsxs)(Z.Ay,{item:!0,xs:12,lg:8,children:[(0,O.jsx)(x.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"visible",children:(0,O.jsx)(fe.A,{elevation:3,sx:{p:{xs:2,sm:3},borderRadius:2,overflow:"hidden"},children:i.map((t=>{const i=(s=t).discountedPrice&&!isNaN(parseFloat(s.discountedPrice))?parseFloat(s.discountedPrice):s.oldPrice&&!isNaN(parseFloat(s.oldPrice))?parseFloat(s.oldPrice):s.price&&!isNaN(parseFloat(s.price))?parseFloat(s.price):0;var s;const o=(e=>e.mainPicture?e.mainPicture:e.pictures&&e.pictures.length>0?e.pictures[0]:e.image?e.image:"https://via.placeholder.com/100x100?text=Produit")(t),c=(e=>e.nom||e.name||"Produit sans nom")(t);return(0,O.jsx)(x.P.div,{variants:a,children:(0,O.jsx)(ae.A,{elevation:0,sx:{mb:2,border:"1px solid",borderColor:"divider",borderRadius:2,transition:"all 0.3s ease","&:hover":{boxShadow:2,borderColor:"transparent"}},children:(0,O.jsx)(ce.A,{sx:{p:{xs:2,sm:3}},children:(0,O.jsxs)(l.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},gap:2},children:[(0,O.jsx)(l.A,{component:L.N_,to:`/products/${t._id}`,sx:{borderRadius:2,overflow:"hidden",flexShrink:0,width:{xs:"100%",sm:120},height:{xs:200,sm:120},display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.grey[100],textDecoration:"none"},children:(0,O.jsx)("img",{src:o,alt:c,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})}),(0,O.jsxs)(l.A,{sx:{flexGrow:1},children:[(0,O.jsx)(y.A,{variant:"h6",component:L.N_,to:`/products/${t._id}`,sx:{textDecoration:"none",color:"text.primary","&:hover":{color:"primary.main"},display:"block",mb:1},children:c}),t.Company_id&&(0,O.jsxs)(y.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Marque: ","object"===typeof t.Company_id?t.Company_id.nom:t.Company_id]}),(0,O.jsxs)(y.A,{variant:"body1",fontWeight:"medium",color:"primary",children:["Prix unitaire: ",i.toFixed(2)," \u20ac"]}),(0,O.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mt:2,gap:1},children:[(0,O.jsx)(v.A,{size:"small",color:"primary",onClick:()=>n(t._id,Math.max(1,t.quantity-1)),disabled:t.quantity<=1,sx:{border:"1px solid",borderColor:"divider"},children:(0,O.jsx)(Qe.A,{fontSize:"small"})}),(0,O.jsx)(Ie.A,{size:"small",value:t.quantity,onChange:e=>{const i=parseInt(e.target.value);!isNaN(i)&&i>0&&n(t._id,i)},sx:{width:60,"& .MuiOutlinedInput-input":{textAlign:"center",py:1}},InputProps:{inputProps:{min:1,style:{textAlign:"center"}}}}),(0,O.jsx)(v.A,{size:"small",color:"primary",onClick:()=>n(t._id,t.quantity+1),sx:{border:"1px solid",borderColor:"divider"},children:(0,O.jsx)(Je.A,{fontSize:"small"})})]})]}),(0,O.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",alignItems:{xs:"flex-start",sm:"flex-end"},justifyContent:"space-between",minWidth:{xs:"auto",sm:120},mt:{xs:2,sm:0}},children:[(0,O.jsxs)(y.A,{variant:"h6",color:"primary.dark",fontWeight:"bold",children:[(i*t.quantity).toFixed(2)," \u20ac"]}),(0,O.jsx)(b.A,{title:"Supprimer du panier",children:(0,O.jsx)(v.A,{color:"error",onClick:()=>r(t._id),sx:{mt:{xs:1,sm:2},"&:hover":{bgcolor:"error.lighter"}},children:(0,O.jsx)(et.A,{})})})]})]})})})},t._id)}))})}),(0,O.jsx)(l.A,{sx:{mt:3,display:"flex",justifyContent:"flex-start"},children:(0,O.jsx)(f.A,{component:L.N_,to:"/products",variant:"outlined",sx:{borderRadius:2},children:"Continuer les achats"})})]}),(0,O.jsx)(Z.Ay,{item:!0,xs:12,lg:4,children:(0,O.jsx)(x.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:(0,O.jsxs)(fe.A,{elevation:3,sx:{p:3,borderRadius:2,position:"sticky",top:100,background:`linear-gradient(to bottom, ${e.palette.background.paper}, ${e.palette.grey[50]})`},children:[(0,O.jsx)(y.A,{variant:"h5",gutterBottom:!0,fontWeight:"bold",sx:{display:"flex",alignItems:"center",mb:3},children:"R\xe9sum\xe9 de la commande"}),(0,O.jsx)(oe.A,{sx:{mb:3}}),(0,O.jsxs)(l.A,{sx:{mb:3},children:[(0,O.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,O.jsx)(y.A,{variant:"body1",children:"Sous-total"}),(0,O.jsxs)(y.A,{variant:"body1",fontWeight:"medium",children:[o().toFixed(2)," \u20ac"]})]}),(0,O.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,O.jsx)(y.A,{variant:"body1",children:"Frais de livraison"}),(0,O.jsx)(y.A,{variant:"body1",fontWeight:"medium",children:i.length>0?"Gratuit":"0.00 \u20ac"})]}),(0,O.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,O.jsx)(y.A,{variant:"body1",children:"TVA (20%)"}),(0,O.jsxs)(y.A,{variant:"body1",fontWeight:"medium",children:[(.2*o()).toFixed(2)," \u20ac"]})]})]}),(0,O.jsx)(oe.A,{sx:{mb:3}}),(0,O.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[(0,O.jsx)(y.A,{variant:"h6",fontWeight:"bold",children:"Total"}),(0,O.jsxs)(y.A,{variant:"h6",fontWeight:"bold",color:"primary.dark",children:[o().toFixed(2)," \u20ac"]})]}),(0,O.jsx)(f.A,{variant:"contained",fullWidth:!0,size:"large",sx:{py:1.5,borderRadius:2,boxShadow:3,"&:hover":{boxShadow:5}},onClick:()=>{t("/checkout")},children:"Passer \xe0 la caisse"}),(0,O.jsxs)(l.A,{sx:{mt:3,p:2,bgcolor:"primary.lighter",borderRadius:2,display:"flex",alignItems:"flex-start",gap:1},children:[(0,O.jsx)(We.A,{sx:{color:"primary.main",mt:.5}}),(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",children:"Livraison offerte pour toute commande en France m\xe9tropolitaine. Retours gratuits sous 30 jours."})]})]})})})]})]})};var it=i(38614),rt=i(41413),st=i(58535),nt=i(43754),ot=i(37885),at=i(46639),lt=i(11227);const ct=()=>{const{cartItems:e,getCartTotal:t,clearCart:i}=(0,M._)(),n=(0,s.Zp)(),[o,a]=(0,r.useState)(0),[d,x]=(0,r.useState)(!1),[h,m]=(0,r.useState)(""),[u,p]=(0,r.useState)(!1),[j,A]=(0,r.useState)(""),[g,b]=(0,r.useState)({firstName:"",lastName:"",phone:""}),[v,w]=(0,r.useState)({address:"",city:"",postalCode:"",country:"Mauritanie",additionalInfo:""}),C=["Informations client","Adresse de livraison","Confirmation"],k=e=>{const{name:t,value:i}=e.target;b((e=>({...e,[t]:i})))},W=e=>{const{name:t,value:i}=e.target;w((e=>({...e,[t]:i})))},R=e=>e.discountedPrice?e.discountedPrice:e.oldPrice?e.oldPrice:e.price?e.price:0;return u?(0,O.jsx)(c.A,{maxWidth:"md",sx:{mt:4,mb:6},children:(0,O.jsxs)(fe.A,{sx:{p:4,textAlign:"center"},children:[(0,O.jsx)(lt.A,{color:"success",sx:{fontSize:80,mb:2}}),(0,O.jsx)(y.A,{variant:"h4",gutterBottom:!0,children:"Merci pour votre commande !"}),(0,O.jsxs)(y.A,{variant:"h6",color:"primary",gutterBottom:!0,children:["N\xb0 de commande: ",j]}),(0,O.jsx)(y.A,{variant:"body1",paragraph:!0,children:"Vous pouvez suivre l'\xe9tat de votre commande gr\xe2ce au num\xe9ro de commande ci-dessus."}),(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Le paiement se fera \xe0 la livraison, en esp\xe8ces ou par carte bancaire."}),(0,O.jsx)(f.A,{variant:"contained",color:"primary",onClick:()=>n("/"),sx:{mt:2},children:"Retour \xe0 l'accueil"})]})}):(0,O.jsx)(c.A,{maxWidth:"lg",sx:{mt:4,mb:6},children:(0,O.jsxs)(fe.A,{sx:{p:{xs:2,sm:4}},children:[(0,O.jsx)(y.A,{variant:"h4",gutterBottom:!0,align:"center",children:"Finaliser votre commande"}),(0,O.jsx)(st.A,{activeStep:o,sx:{pt:3,pb:5},children:C.map((e=>(0,O.jsx)(nt.A,{children:(0,O.jsx)(ot.A,{children:e})},e)))}),h&&(0,O.jsx)(Ce.A,{severity:"error",sx:{mb:3},children:h}),(i=>{switch(i){case 0:return(0,O.jsxs)(l.A,{children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Informations client"}),(0,O.jsxs)(Z.Ay,{container:!0,spacing:3,children:[(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,children:(0,O.jsx)(Ie.A,{required:!0,fullWidth:!0,label:"Pr\xe9nom",name:"firstName",value:g.firstName,onChange:k})}),(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,children:(0,O.jsx)(Ie.A,{required:!0,fullWidth:!0,label:"Nom",name:"lastName",value:g.lastName,onChange:k})}),(0,O.jsx)(Z.Ay,{item:!0,xs:12,children:(0,O.jsx)(Ie.A,{required:!0,fullWidth:!0,label:"T\xe9l\xe9phone",name:"phone",value:g.phone,onChange:k})})]})]});case 1:return(0,O.jsxs)(l.A,{children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"Adresse de livraison"}),(0,O.jsxs)(Z.Ay,{container:!0,spacing:3,children:[(0,O.jsx)(Z.Ay,{item:!0,xs:12,children:(0,O.jsx)(Ie.A,{required:!0,fullWidth:!0,label:"Adresse",name:"address",value:v.address,onChange:W})}),(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,children:(0,O.jsx)(Ie.A,{required:!0,fullWidth:!0,label:"Ville",name:"city",value:v.city,onChange:W})}),(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,children:(0,O.jsx)(Ie.A,{required:!0,fullWidth:!0,label:"Code postal",name:"postalCode",value:v.postalCode,onChange:W})}),(0,O.jsx)(Z.Ay,{item:!0,xs:12,children:(0,O.jsx)(Ie.A,{fullWidth:!0,label:"Pays",name:"country",value:v.country,onChange:W,disabled:!0})}),(0,O.jsx)(Z.Ay,{item:!0,xs:12,children:(0,O.jsx)(Ie.A,{fullWidth:!0,label:"Informations compl\xe9mentaires (optionnel)",name:"additionalInfo",multiline:!0,rows:3,value:v.additionalInfo,onChange:W})})]})]});case 2:return(0,O.jsxs)(l.A,{children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:"R\xe9sum\xe9 de votre commande"}),(0,O.jsxs)(l.A,{sx:{mb:3},children:[(0,O.jsx)(y.A,{variant:"subtitle1",fontWeight:"bold",children:"Informations client:"}),(0,O.jsxs)(y.A,{children:[g.firstName," ",g.lastName]}),(0,O.jsx)(y.A,{children:g.phone})]}),(0,O.jsxs)(l.A,{sx:{mb:3},children:[(0,O.jsx)(y.A,{variant:"subtitle1",fontWeight:"bold",children:"Adresse de livraison:"}),(0,O.jsx)(y.A,{children:v.address}),(0,O.jsxs)(y.A,{children:[v.postalCode," ",v.city]}),(0,O.jsx)(y.A,{children:v.country}),v.additionalInfo&&(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",children:v.additionalInfo})]}),(0,O.jsx)(oe.A,{sx:{my:3}}),(0,O.jsx)(y.A,{variant:"subtitle1",fontWeight:"bold",children:"Articles command\xe9s:"}),(0,O.jsx)(P.A,{sx:{width:"100%"},children:e.map((e=>{return(0,O.jsxs)(_.Ay,{alignItems:"flex-start",sx:{py:2,px:0},children:[(0,O.jsx)(it.A,{children:(0,O.jsx)(rt.A,{alt:e.nom||e.name,src:(t=e,t.mainPicture?t.mainPicture:t.pictures&&t.pictures.length>0?t.pictures[0]:t.image?t.image:"https://via.placeholder.com/100x100?text=Produit"),variant:"rounded",sx:{width:60,height:60,mr:2}})}),(0,O.jsx)(S.A,{primary:e.nom||e.name,secondary:(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(y.A,{component:"span",variant:"body2",color:"text.primary",children:["Quantit\xe9: ",e.quantity]}),(0,O.jsx)("br",{}),(0,O.jsxs)(y.A,{component:"span",variant:"body2",color:"text.primary",children:["Prix unitaire: ",R(e).toFixed(2)," \u20ac"]})]})}),(0,O.jsxs)(y.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:[(R(e)*e.quantity).toFixed(2)," \u20ac"]})]},e._id);var t}))}),(0,O.jsx)(oe.A,{sx:{my:3}}),(0,O.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[(0,O.jsx)(y.A,{variant:"h6",children:"Total"}),(0,O.jsxs)(y.A,{variant:"h6",sx:{fontWeight:"bold"},children:[t().toFixed(2)," \u20ac"]})]}),(0,O.jsxs)(l.A,{sx:{bgcolor:"#f5f5f5",p:2,borderRadius:1,mb:3},children:[(0,O.jsx)(y.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"Mode de paiement:"}),(0,O.jsx)(y.A,{children:"Paiement \xe0 la livraison"}),(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",children:"Vous paierez en esp\xe8ces ou par carte bancaire au moment de la livraison."})]})]});default:return"\xc9tape inconnue"}})(o),(0,O.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[(0,O.jsx)(f.A,{variant:"outlined",onClick:()=>{a((e=>e-1)),m("")},disabled:0===o,children:"Retour"}),o===C.length-1?(0,O.jsx)(f.A,{variant:"contained",color:"primary",onClick:async()=>{try{x(!0),m("");const t={customer:g,shippingAddress:v,items:e.map((e=>({product:e._id,quantity:e.quantity})))},r=await ve.A.post("/orders",t);r.data.success&&(A(r.data.data.orderNumber),p(!0),i()),x(!1)}catch(h){var t,r;x(!1),console.error("Erreur lors de la cr\xe9ation de la commande:",h),m((null===(t=h.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Une erreur est survenue lors de la cr\xe9ation de votre commande")}},disabled:d,startIcon:d&&(0,O.jsx)(at.A,{size:20,color:"inherit"}),children:d?"Traitement en cours...":"Confirmer la commande"}):(0,O.jsx)(f.A,{variant:"contained",color:"primary",onClick:()=>{let e="";0===o?e=g.firstName.trim()?g.lastName.trim()?g.phone.trim()?"":"Le num\xe9ro de t\xe9l\xe9phone est requis":"Le nom est requis":"Le pr\xe9nom est requis":1===o&&(e=v.address.trim()?v.city.trim()?v.postalCode.trim()?"":"Le code postal est requis":"La ville est requise":"L'adresse est requise"),e?m(e):(m(""),a((e=>e+1)))},children:"Suivant"})]})]})})},dt=()=>{const{wishlistItems:e,removeFromWishlist:t}=(0,T.n)(),{addToCart:i}=(0,M._)();return 0===e.length?(0,O.jsx)(c.A,{maxWidth:"lg",sx:{mt:12,mb:4},children:(0,O.jsxs)(l.A,{sx:{textAlign:"center",p:4,bgcolor:"background.paper",borderRadius:2,boxShadow:1},children:[(0,O.jsx)(y.A,{variant:"h5",gutterBottom:!0,children:"Votre liste de souhaits est vide"}),(0,O.jsx)(f.A,{component:L.N_,to:"/products",variant:"contained",color:"primary",sx:{mt:2},children:"D\xe9couvrir nos produits"})]})}):(0,O.jsxs)(c.A,{maxWidth:"lg",sx:{mt:12,mb:4},children:[(0,O.jsx)(y.A,{variant:"h4",gutterBottom:!0,children:"Ma Liste de Souhaits"}),(0,O.jsx)(Z.Ay,{container:!0,spacing:3,children:e.map((e=>(0,O.jsx)(Z.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,O.jsx)(x.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},children:(0,O.jsxs)(ae.A,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:4}},children:[(0,O.jsx)(de.A,{component:"img",height:"200",image:e.image,alt:e.name,sx:{objectFit:"cover"}}),(0,O.jsxs)(ce.A,{sx:{flexGrow:1},children:[(0,O.jsx)(y.A,{variant:"h6",gutterBottom:!0,children:e.name}),(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",children:e.description}),(0,O.jsxs)(y.A,{variant:"h6",color:"primary",sx:{mt:2},children:[e.price," \u20ac"]})]}),(0,O.jsxs)(_e.A,{sx:{justifyContent:"space-between",p:2},children:[(0,O.jsx)(f.A,{variant:"contained",startIcon:(0,O.jsx)($.A,{}),onClick:()=>{return i(r=e),void t(r._id);var r},fullWidth:!0,sx:{mr:1},children:"Ajouter au panier"}),(0,O.jsx)(v.A,{color:"error",onClick:()=>t(e._id),children:(0,O.jsx)(et.A,{})})]})]})})},e._id)))})]})},xt=()=>(0,O.jsx)(c.A,{maxWidth:"md",children:(0,O.jsx)(x.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,O.jsxs)(fe.A,{sx:{p:5,mt:6,borderRadius:2,textAlign:"center",boxShadow:3},children:[(0,O.jsx)(y.A,{variant:"h1",component:"h1",color:"primary",sx:{fontWeight:"bold",fontSize:{xs:"4rem",md:"6rem"}},children:"404"}),(0,O.jsx)(y.A,{variant:"h4",component:"h2",gutterBottom:!0,sx:{mb:3},children:"Page non trouv\xe9e"}),(0,O.jsx)(y.A,{variant:"body1",paragraph:!0,children:"La page que vous recherchez n'existe pas ou a \xe9t\xe9 d\xe9plac\xe9e."}),(0,O.jsxs)(l.A,{sx:{mt:4,display:"flex",justifyContent:"center",gap:2,flexWrap:"wrap"},children:[(0,O.jsx)(f.A,{component:L.N_,to:"/",variant:"contained",startIcon:(0,O.jsx)(R.A,{}),size:"large",children:"Retour \xe0 l'accueil"}),(0,O.jsx)(f.A,{component:L.N_,to:"/search",variant:"outlined",startIcon:(0,O.jsx)(B.A,{}),size:"large",children:"Rechercher un produit"})]}),(0,O.jsx)(l.A,{sx:{mt:5,pt:3,borderTop:"1px solid",borderColor:"divider"},children:(0,O.jsx)(y.A,{variant:"body2",color:"text.secondary",children:"Si vous pensez qu'il s'agit d'une erreur, veuillez nous contacter."})})]})})});const ht=function(){return(0,O.jsxs)(s.BV,{children:[(0,O.jsx)(s.qh,{path:"/",element:(0,O.jsx)(se,{children:(0,O.jsx)(pe,{})})}),(0,O.jsx)(s.qh,{path:"/categories",element:(0,O.jsx)(se,{children:(0,O.jsx)(He,{})})}),(0,O.jsx)(s.qh,{path:"/categories/:id",element:(0,O.jsx)(se,{children:(0,O.jsx)(ye,{})})}),(0,O.jsx)(s.qh,{path:"/products/:id",element:(0,O.jsx)(se,{children:(0,O.jsx)(qe,{})})}),(0,O.jsx)(s.qh,{path:"/products/",element:(0,O.jsx)(se,{children:(0,O.jsx)(Xe,{})})}),(0,O.jsx)(s.qh,{path:"/companies",element:(0,O.jsx)(se,{children:(0,O.jsx)(Ue,{})})}),(0,O.jsx)(s.qh,{path:"/companies/:id",element:(0,O.jsx)(se,{children:(0,O.jsx)(Ve,{})})}),(0,O.jsx)(s.qh,{path:"/search",element:(0,O.jsx)(se,{children:(0,O.jsx)(Te,{})})}),(0,O.jsx)(s.qh,{path:"/cart",element:(0,O.jsx)(se,{children:(0,O.jsx)(tt,{})})}),(0,O.jsx)(s.qh,{path:"/checkout",element:(0,O.jsx)(se,{children:(0,O.jsx)(ct,{})})}),(0,O.jsx)(s.qh,{path:"/wishlist",element:(0,O.jsx)(se,{children:(0,O.jsx)(dt,{})})}),(0,O.jsx)(s.qh,{path:"/404",element:(0,O.jsx)(se,{children:(0,O.jsx)(xt,{})})}),(0,O.jsx)(s.qh,{path:"*",element:(0,O.jsx)(s.C5,{to:"/404",replace:!0})})]})}}}]);